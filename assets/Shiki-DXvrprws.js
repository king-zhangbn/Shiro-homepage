const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./langs-DCiNkHP7.js","./index-Bdj1s10Z.js","./index-BUILuLAv.css"])))=>i.map(i=>d[i]);
import{r as N,j as P,_ as uo}from"./index-Bdj1s10Z.js";import{e as fo}from"./index-D8dKRjXF.js";import{K as ho}from"./owner-DtjyHHjG.js";import{c as qn,a as bt,M as go}from"./StyledButton-sW1agOXJ.js";import{c as po,g as mo}from"./viewport-CAPiZMk5.js";import{s as bo}from"./spring-C80N1tKa.js";import{m as yt}from"./proxy-65bYlOXl.js";import{u as yo}from"./use-event-callback-Ch3V_kl9.js";import{s as en}from"./dom-BowoBODo.js";import{A as Co}from"./index-DnxgsE5s.js";let se=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function ko(t){return $t(t)}function $t(t){return Array.isArray(t)?_o(t):typeof t=="object"?vo(t):t}function _o(t){let e=[];for(let n=0,o=t.length;n<o;n++)e[n]=$t(t[n]);return e}function vo(t){let e={};for(let n in t)e[n]=$t(t[n]);return e}function Vn(t,...e){return e.forEach(n=>{for(let o in n)t[o]=n[o]}),t}function Kn(t){const e=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return e===0?t:~e===t.length-1?Kn(t.substring(0,t.length-1)):t.substr(~e+1)}var it=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,Pe=class{static hasCaptures(t){return t===null?!1:(it.lastIndex=0,it.test(t))}static replaceCaptures(t,e,n){return t.replace(it,(o,s,a,i)=>{let l=n[parseInt(s||a,10)];if(l){let c=e.substring(l.start,l.end);for(;c[0]===".";)c=c.substring(1);switch(i){case"downcase":return c.toLowerCase();case"upcase":return c.toUpperCase();default:return c}}else return o})}};function Qn(t,e){return t<e?-1:t>e?1:0}function Xn(t,e){if(t===null&&e===null)return 0;if(!t)return-1;if(!e)return 1;let n=t.length,o=e.length;if(n===o){for(let s=0;s<n;s++){let a=Qn(t[s],e[s]);if(a!==0)return a}return 0}return n-o}function tn(t){return!!(/^#[0-9a-f]{6}$/i.test(t)||/^#[0-9a-f]{8}$/i.test(t)||/^#[0-9a-f]{3}$/i.test(t)||/^#[0-9a-f]{4}$/i.test(t))}function Jn(t){return t.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var Yn=class{constructor(t){this.fn=t,this.cache=new Map}get(t){if(this.cache.has(t))return this.cache.get(t);const e=this.fn(t);return this.cache.set(t,e),e}},je=class{constructor(t,e,n){this._colorMap=t,this._defaults=e,this._root=n,this._cachedMatchRoot=new Yn(o=>this._root.match(o))}static createFromRawTheme(t,e){return this.createFromParsedTheme(xo(t),e)}static createFromParsedTheme(t,e){return Ro(t,e)}getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(t){if(t===null)return this._defaults;const e=t.scopeName,o=this._cachedMatchRoot.get(e).find(s=>So(t.parent,s.parentScopes));return o?new Zn(o.fontStyle,o.foreground,o.background):null}},lt=class Oe{constructor(e,n){this.parent=e,this.scopeName=n}static push(e,n){for(const o of n)e=new Oe(e,o);return e}static from(...e){let n=null;for(let o=0;o<e.length;o++)n=new Oe(n,e[o]);return n}push(e){return new Oe(this,e)}getSegments(){let e=this;const n=[];for(;e;)n.push(e.scopeName),e=e.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const n=[];let o=this;for(;o&&o!==e;)n.push(o.scopeName),o=o.parent;return o===e?n.reverse():void 0}};function So(t,e){if(e.length===0)return!0;for(let n=0;n<e.length;n++){let o=e[n],s=!1;if(o===">"){if(n===e.length-1)return!1;o=e[++n],s=!0}for(;t&&!wo(t.scopeName,o);){if(s)return!1;t=t.parent}if(!t)return!1;t=t.parent}return!0}function wo(t,e){return e===t||t.startsWith(e)&&t[e.length]==="."}var Zn=class{constructor(t,e,n){this.fontStyle=t,this.foregroundId=e,this.backgroundId=n}};function xo(t){if(!t)return[];if(!t.settings||!Array.isArray(t.settings))return[];let e=t.settings,n=[],o=0;for(let s=0,a=e.length;s<a;s++){let i=e[s];if(!i.settings)continue;let l;if(typeof i.scope=="string"){let f=i.scope;f=f.replace(/^[,]+/,""),f=f.replace(/[,]+$/,""),l=f.split(",")}else Array.isArray(i.scope)?l=i.scope:l=[""];let c=-1;if(typeof i.settings.fontStyle=="string"){c=0;let f=i.settings.fontStyle.split(" ");for(let h=0,g=f.length;h<g;h++)switch(f[h]){case"italic":c=c|1;break;case"bold":c=c|2;break;case"underline":c=c|4;break;case"strikethrough":c=c|8;break}}let u=null;typeof i.settings.foreground=="string"&&tn(i.settings.foreground)&&(u=i.settings.foreground);let d=null;typeof i.settings.background=="string"&&tn(i.settings.background)&&(d=i.settings.background);for(let f=0,h=l.length;f<h;f++){let p=l[f].trim().split(" "),C=p[p.length-1],y=null;p.length>1&&(y=p.slice(0,p.length-1),y.reverse()),n[o++]=new Eo(C,y,s,c,u,d)}}return n}var Eo=class{constructor(t,e,n,o,s,a){this.scope=t,this.parentScopes=e,this.index=n,this.fontStyle=o,this.foreground=s,this.background=a}},X=(t=>(t[t.NotSet=-1]="NotSet",t[t.None=0]="None",t[t.Italic=1]="Italic",t[t.Bold=2]="Bold",t[t.Underline=4]="Underline",t[t.Strikethrough=8]="Strikethrough",t))(X||{});function Ro(t,e){t.sort((c,u)=>{let d=Qn(c.scope,u.scope);return d!==0||(d=Xn(c.parentScopes,u.parentScopes),d!==0)?d:c.index-u.index});let n=0,o="#000000",s="#ffffff";for(;t.length>=1&&t[0].scope==="";){let c=t.shift();c.fontStyle!==-1&&(n=c.fontStyle),c.foreground!==null&&(o=c.foreground),c.background!==null&&(s=c.background)}let a=new Ao(e),i=new Zn(n,a.getId(o),a.getId(s)),l=new Bo(new Ct(0,null,-1,0,0),[]);for(let c=0,u=t.length;c<u;c++){let d=t[c];l.insert(0,d.scope,d.parentScopes,d.fontStyle,a.getId(d.foreground),a.getId(d.background))}return new je(a,i,l)}var Ao=class{constructor(t){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(t)){this._isFrozen=!0;for(let e=0,n=t.length;e<n;e++)this._color2id[t[e]]=e,this._id2color[e]=t[e]}else this._isFrozen=!1}getId(t){if(t===null)return 0;t=t.toUpperCase();let e=this._color2id[t];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${t}`);return e=++this._lastColorId,this._color2id[t]=e,this._id2color[e]=t,e}getColorMap(){return this._id2color.slice(0)}},No=Object.freeze([]),Ct=class er{constructor(e,n,o,s,a){this.scopeDepth=e,this.parentScopes=n||No,this.fontStyle=o,this.foreground=s,this.background=a}clone(){return new er(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let n=[];for(let o=0,s=e.length;o<s;o++)n[o]=e[o].clone();return n}acceptOverwrite(e,n,o,s){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,n!==-1&&(this.fontStyle=n),o!==0&&(this.foreground=o),s!==0&&(this.background=s)}},Bo=class kt{constructor(e,n=[],o={}){this._mainRule=e,this._children=o,this._rulesWithParentScopes=n}static _cmpBySpecificity(e,n){if(e.scopeDepth!==n.scopeDepth)return n.scopeDepth-e.scopeDepth;let o=0,s=0;for(;e.parentScopes[o]===">"&&o++,n.parentScopes[s]===">"&&s++,!(o>=e.parentScopes.length||s>=n.parentScopes.length);){const a=n.parentScopes[s].length-e.parentScopes[o].length;if(a!==0)return a;o++,s++}return n.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let o=e.indexOf("."),s,a;if(o===-1?(s=e,a=""):(s=e.substring(0,o),a=e.substring(o+1)),this._children.hasOwnProperty(s))return this._children[s].match(a)}const n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(kt._cmpBySpecificity),n}insert(e,n,o,s,a,i){if(n===""){this._doInsertHere(e,o,s,a,i);return}let l=n.indexOf("."),c,u;l===-1?(c=n,u=""):(c=n.substring(0,l),u=n.substring(l+1));let d;this._children.hasOwnProperty(c)?d=this._children[c]:(d=new kt(this._mainRule.clone(),Ct.cloneArr(this._rulesWithParentScopes)),this._children[c]=d),d.insert(e+1,u,o,s,a,i)}_doInsertHere(e,n,o,s,a){if(n===null){this._mainRule.acceptOverwrite(e,o,s,a);return}for(let i=0,l=this._rulesWithParentScopes.length;i<l;i++){let c=this._rulesWithParentScopes[i];if(Xn(c.parentScopes,n)===0){c.acceptOverwrite(e,o,s,a);return}}o===-1&&(o=this._mainRule.fontStyle),s===0&&(s=this._mainRule.foreground),a===0&&(a=this._mainRule.background),this._rulesWithParentScopes.push(new Ct(e,n,o,s,a))}},me=class H{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const n=H.getLanguageId(e),o=H.getTokenType(e),s=H.getFontStyle(e),a=H.getForeground(e),i=H.getBackground(e);console.log({languageId:n,tokenType:o,fontStyle:s,foreground:a,background:i})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,n,o,s,a,i,l){let c=H.getLanguageId(e),u=H.getTokenType(e),d=H.containsBalancedBrackets(e)?1:0,f=H.getFontStyle(e),h=H.getForeground(e),g=H.getBackground(e);return n!==0&&(c=n),o!==8&&(u=o),s!==null&&(d=s?1:0),a!==-1&&(f=a),i!==0&&(h=i),l!==0&&(g=l),(c<<0|u<<8|d<<10|f<<11|h<<15|g<<24)>>>0}};function He(t,e){const n=[],o=Io(t);let s=o.next();for(;s!==null;){let c=0;if(s.length===2&&s.charAt(1)===":"){switch(s.charAt(0)){case"R":c=1;break;case"L":c=-1;break;default:console.log(`Unknown priority ${s} in scope selector`)}s=o.next()}let u=i();if(n.push({matcher:u,priority:c}),s!==",")break;s=o.next()}return n;function a(){if(s==="-"){s=o.next();const c=a();return u=>!!c&&!c(u)}if(s==="("){s=o.next();const c=l();return s===")"&&(s=o.next()),c}if(nn(s)){const c=[];do c.push(s),s=o.next();while(nn(s));return u=>e(c,u)}return null}function i(){const c=[];let u=a();for(;u;)c.push(u),u=a();return d=>c.every(f=>f(d))}function l(){const c=[];let u=i();for(;u&&(c.push(u),s==="|"||s===",");){do s=o.next();while(s==="|"||s===",");u=i()}return d=>c.some(f=>f(d))}}function nn(t){return!!t&&!!t.match(/[\w\.:]+/)}function Io(t){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=e.exec(t);return{next:()=>{if(!n)return null;const o=n[0];return n=e.exec(t),o}}}function tr(t){typeof t.dispose=="function"&&t.dispose()}var we=class{constructor(t){this.scopeName=t}toKey(){return this.scopeName}},Po=class{constructor(t,e){this.scopeName=t,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},To=class{constructor(){this._references=[],this._seenReferenceKeys=new Set,this.visitedRule=new Set}get references(){return this._references}add(t){const e=t.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(t))}},Lo=class{constructor(t,e){this.repo=t,this.initialScopeName=e,this.seenFullScopeRequests=new Set,this.seenPartialScopeRequests=new Set,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new we(this.initialScopeName)]}processQueue(){const t=this.Q;this.Q=[];const e=new To;for(const n of t)Mo(n,this.initialScopeName,this.repo,e);for(const n of e.references)if(n instanceof we){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};function Mo(t,e,n,o){const s=n.lookup(t.scopeName);if(!s){if(t.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const a=n.lookup(e);t instanceof we?Fe({baseGrammar:a,selfGrammar:s},o):_t(t.ruleName,{baseGrammar:a,selfGrammar:s,repository:s.repository},o);const i=n.injections(t.scopeName);if(i)for(const l of i)o.add(new we(l))}function _t(t,e,n){if(e.repository&&e.repository[t]){const o=e.repository[t];Ue([o],e,n)}}function Fe(t,e){t.selfGrammar.patterns&&Array.isArray(t.selfGrammar.patterns)&&Ue(t.selfGrammar.patterns,{...t,repository:t.selfGrammar.repository},e),t.selfGrammar.injections&&Ue(Object.values(t.selfGrammar.injections),{...t,repository:t.selfGrammar.repository},e)}function Ue(t,e,n){for(const o of t){if(n.visitedRule.has(o))continue;n.visitedRule.add(o);const s=o.repository?Vn({},e.repository,o.repository):e.repository;Array.isArray(o.patterns)&&Ue(o.patterns,{...e,repository:s},n);const a=o.include;if(!a)continue;const i=nr(a);switch(i.kind){case 0:Fe({...e,selfGrammar:e.baseGrammar},n);break;case 1:Fe(e,n);break;case 2:_t(i.ruleName,{...e,repository:s},n);break;case 3:case 4:const l=i.scopeName===e.selfGrammar.scopeName?e.selfGrammar:i.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(l){const c={baseGrammar:e.baseGrammar,selfGrammar:l,repository:s};i.kind===4?_t(i.ruleName,c,n):Fe(c,n)}else i.kind===4?n.add(new Po(i.scopeName,i.ruleName)):n.add(new we(i.scopeName));break}}}var $o=class{constructor(){this.kind=0}},Go=class{constructor(){this.kind=1}},Oo=class{constructor(t){this.ruleName=t,this.kind=2}},Fo=class{constructor(t){this.scopeName=t,this.kind=3}},Do=class{constructor(t,e){this.scopeName=t,this.ruleName=e,this.kind=4}};function nr(t){if(t==="$base")return new $o;if(t==="$self")return new Go;const e=t.indexOf("#");if(e===-1)return new Fo(t);if(e===0)return new Oo(t.substring(1));{const n=t.substring(0,e),o=t.substring(e+1);return new Do(n,o)}}var jo=/\\(\d+)/,rn=/\\(\d+)/g,Ho=-1,rr=-2;var Ne=class{constructor(t,e,n,o){this.$location=t,this.id=e,this._name=n||null,this._nameIsCapturing=Pe.hasCaptures(this._name),this._contentName=o||null,this._contentNameIsCapturing=Pe.hasCaptures(this._contentName)}get debugName(){const t=this.$location?`${Kn(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${t}`}getName(t,e){return!this._nameIsCapturing||this._name===null||t===null||e===null?this._name:Pe.replaceCaptures(this._name,t,e)}getContentName(t,e){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:Pe.replaceCaptures(this._contentName,t,e)}},Uo=class extends Ne{constructor(t,e,n,o,s){super(t,e,n,o),this.retokenizeCapturedWithRuleId=s}dispose(){}collectPatterns(t,e){throw new Error("Not supported!")}compile(t,e){throw new Error("Not supported!")}compileAG(t,e,n,o){throw new Error("Not supported!")}},Wo=class extends Ne{constructor(t,e,n,o,s){super(t,e,n,null),this._match=new xe(o,this.id),this.captures=s,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(t,e){e.push(this._match)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,o){return this._getCachedCompiledPatterns(t).compileAG(t,n,o)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Ee,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},on=class extends Ne{constructor(t,e,n,o,s){super(t,e,n,o),this.patterns=s.patterns,this.hasMissingPatterns=s.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(t,e){for(const n of this.patterns)t.getRule(n).collectPatterns(t,e)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,o){return this._getCachedCompiledPatterns(t).compileAG(t,n,o)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Ee,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},vt=class extends Ne{constructor(t,e,n,o,s,a,i,l,c,u){super(t,e,n,o),this._begin=new xe(s,this.id),this.beginCaptures=a,this._end=new xe(i||"￿",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=l,this.applyEndPatternLast=c||!1,this.patterns=u.patterns,this.hasMissingPatterns=u.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(t,e){return this._end.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t,e).compile(t)}compileAG(t,e,n,o){return this._getCachedCompiledPatterns(t,e).compileAG(t,n,o)}_getCachedCompiledPatterns(t,e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Ee;for(const n of this.patterns)t.getRule(n).collectPatterns(t,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,e):this._cachedCompiledPatterns.setSource(0,e)),this._cachedCompiledPatterns}},We=class extends Ne{constructor(t,e,n,o,s,a,i,l,c){super(t,e,n,o),this._begin=new xe(s,this.id),this.beginCaptures=a,this.whileCaptures=l,this._while=new xe(i,rr),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=c.patterns,this.hasMissingPatterns=c.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(t,e){return this._while.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,o){return this._getCachedCompiledPatterns(t).compileAG(t,n,o)}_getCachedCompiledPatterns(t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Ee;for(const e of this.patterns)t.getRule(e).collectPatterns(t,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(t,e){return this._getCachedCompiledWhilePatterns(t,e).compile(t)}compileWhileAG(t,e,n,o){return this._getCachedCompiledWhilePatterns(t,e).compileAG(t,n,o)}_getCachedCompiledWhilePatterns(t,e){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new Ee,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,e||"￿"),this._cachedCompiledWhilePatterns}},or=class G{static createCaptureRule(e,n,o,s,a){return e.registerRule(i=>new Uo(n,i,o,s,a))}static getCompiledRuleId(e,n,o){return e.id||n.registerRule(s=>{if(e.id=s,e.match)return new Wo(e.$vscodeTextmateLocation,e.id,e.name,e.match,G._compileCaptures(e.captures,n,o));if(typeof e.begin>"u"){e.repository&&(o=Vn({},o,e.repository));let a=e.patterns;return typeof a>"u"&&e.include&&(a=[{include:e.include}]),new on(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,G._compilePatterns(a,n,o))}return e.while?new We(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,G._compileCaptures(e.beginCaptures||e.captures,n,o),e.while,G._compileCaptures(e.whileCaptures||e.captures,n,o),G._compilePatterns(e.patterns,n,o)):new vt(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,G._compileCaptures(e.beginCaptures||e.captures,n,o),e.end,G._compileCaptures(e.endCaptures||e.captures,n,o),e.applyEndPatternLast,G._compilePatterns(e.patterns,n,o))}),e.id}static _compileCaptures(e,n,o){let s=[];if(e){let a=0;for(const i in e){if(i==="$vscodeTextmateLocation")continue;const l=parseInt(i,10);l>a&&(a=l)}for(let i=0;i<=a;i++)s[i]=null;for(const i in e){if(i==="$vscodeTextmateLocation")continue;const l=parseInt(i,10);let c=0;e[i].patterns&&(c=G.getCompiledRuleId(e[i],n,o)),s[l]=G.createCaptureRule(n,e[i].$vscodeTextmateLocation,e[i].name,e[i].contentName,c)}}return s}static _compilePatterns(e,n,o){let s=[];if(e)for(let a=0,i=e.length;a<i;a++){const l=e[a];let c=-1;if(l.include){const u=nr(l.include);switch(u.kind){case 0:case 1:c=G.getCompiledRuleId(o[l.include],n,o);break;case 2:let d=o[u.ruleName];d&&(c=G.getCompiledRuleId(d,n,o));break;case 3:case 4:const f=u.scopeName,h=u.kind===4?u.ruleName:null,g=n.getExternalGrammar(f,o);if(g)if(h){let p=g.repository[h];p&&(c=G.getCompiledRuleId(p,n,g.repository))}else c=G.getCompiledRuleId(g.repository.$self,n,g.repository);break}}else c=G.getCompiledRuleId(l,n,o);if(c!==-1){const u=n.getRule(c);let d=!1;if((u instanceof on||u instanceof vt||u instanceof We)&&u.hasMissingPatterns&&u.patterns.length===0&&(d=!0),d)continue;s.push(c)}}return{patterns:s,hasMissingPatterns:(e?e.length:0)!==s.length}}},xe=class sr{constructor(e,n){if(e){const o=e.length;let s=0,a=[],i=!1;for(let l=0;l<o;l++)if(e.charAt(l)==="\\"&&l+1<o){const u=e.charAt(l+1);u==="z"?(a.push(e.substring(s,l)),a.push("$(?!\\n)(?<!\\n)"),s=l+2):(u==="A"||u==="G")&&(i=!0),l++}this.hasAnchor=i,s===0?this.source=e:(a.push(e.substring(s,o)),this.source=a.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,this.hasBackReferences=jo.test(this.source)}clone(){return new sr(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,n){let o=n.map(s=>e.substring(s.start,s.end));return rn.lastIndex=0,this.source.replace(rn,(s,a)=>Jn(o[parseInt(a,10)]||""))}_buildAnchorCache(){let e=[],n=[],o=[],s=[],a,i,l,c;for(a=0,i=this.source.length;a<i;a++)l=this.source.charAt(a),e[a]=l,n[a]=l,o[a]=l,s[a]=l,l==="\\"&&a+1<i&&(c=this.source.charAt(a+1),c==="A"?(e[a+1]="￿",n[a+1]="￿",o[a+1]="A",s[a+1]="A"):c==="G"?(e[a+1]="￿",n[a+1]="G",o[a+1]="￿",s[a+1]="G"):(e[a+1]=c,n[a+1]=c,o[a+1]=c,s[a+1]=c),a++);return{A0_G0:e.join(""),A0_G1:n.join(""),A1_G0:o.join(""),A1_G1:s.join("")}}resolveAnchors(e,n){return!this.hasAnchor||!this._anchorCache?this.source:e?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},Ee=class{constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(t){this._items.push(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}unshift(t){this._items.unshift(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}length(){return this._items.length}setSource(t,e){this._items[t].source!==e&&(this._disposeCaches(),this._items[t].setSource(e))}compile(t){if(!this._cached){let e=this._items.map(n=>n.source);this._cached=new sn(t,e,this._items.map(n=>n.ruleId))}return this._cached}compileAG(t,e,n){return this._hasAnchors?e?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G0):this.compile(t)}_resolveAnchors(t,e,n){let o=this._items.map(s=>s.resolveAnchors(e,n));return new sn(t,o,this._items.map(s=>s.ruleId))}},sn=class{constructor(t,e,n){this.regExps=e,this.rules=n,this.scanner=t.createOnigScanner(e)}dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const t=[];for(let e=0,n=this.rules.length;e<n;e++)t.push("   - "+this.rules[e]+": "+this.regExps[e]);return t.join(`
`)}findNextMatchSync(t,e,n){const o=this.scanner.findNextMatchSync(t,e,n);return o?{ruleId:this.rules[o.index],captureIndices:o.captureIndices}:null}},St=class{constructor(t,e){this.languageId=t,this.tokenType=e}},Gt=class wt{constructor(e,n){this._getBasicScopeAttributes=new Yn(o=>{const s=this._scopeToLanguage(o),a=this._toStandardTokenType(o);return new St(s,a)}),this._defaultAttributes=new St(e,8),this._embeddedLanguagesMatcher=new qo(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?wt._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const n=e.match(wt.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}};Gt._NULL_SCOPE_METADATA=new St(0,0);Gt.STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/;var zo=Gt,qo=class{constructor(t){if(t.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(t);const e=t.map(([n,o])=>Jn(n));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(t){if(!this.scopesRegExp)return;const e=t.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},an=class{constructor(t,e){this.stack=t,this.stoppedEarly=e}};function ar(t,e,n,o,s,a,i,l){const c=e.content.length;let u=!1,d=-1;if(i){const g=Vo(t,e,n,o,s,a);s=g.stack,o=g.linePos,n=g.isFirstLine,d=g.anchorPosition}const f=Date.now();for(;!u;){if(l!==0&&Date.now()-f>l)return new an(s,!0);h()}return new an(s,!1);function h(){const g=Ko(t,e,n,o,s,d);if(!g){a.produce(s,c),u=!0;return}const p=g.captureIndices,C=g.matchedRuleId,y=p&&p.length>0?p[0].end>o:!1;if(C===Ho){const v=s.getRule(t);a.produce(s,p[0].start),s=s.withContentNameScopesList(s.nameScopesList),ke(t,e,n,s,a,v.endCaptures,p),a.produce(s,p[0].end);const k=s;if(s=s.parent,d=k.getAnchorPos(),!y&&k.getEnterPos()===o){s=k,a.produce(s,c),u=!0;return}}else{const v=t.getRule(C);a.produce(s,p[0].start);const k=s,w=v.getName(e.content,p),$=s.contentNameScopesList.pushAttributed(w,t);if(s=s.push(C,o,d,p[0].end===c,null,$,$),v instanceof vt){const B=v;ke(t,e,n,s,a,B.beginCaptures,p),a.produce(s,p[0].end),d=p[0].end;const K=B.getContentName(e.content,p),W=$.pushAttributed(K,t);if(s=s.withContentNameScopesList(W),B.endHasBackReferences&&(s=s.withEndRule(B.getEndWithResolvedBackReferences(e.content,p))),!y&&k.hasSameRuleAs(s)){s=s.pop(),a.produce(s,c),u=!0;return}}else if(v instanceof We){const B=v;ke(t,e,n,s,a,B.beginCaptures,p),a.produce(s,p[0].end),d=p[0].end;const K=B.getContentName(e.content,p),W=$.pushAttributed(K,t);if(s=s.withContentNameScopesList(W),B.whileHasBackReferences&&(s=s.withEndRule(B.getWhileWithResolvedBackReferences(e.content,p))),!y&&k.hasSameRuleAs(s)){s=s.pop(),a.produce(s,c),u=!0;return}}else if(ke(t,e,n,s,a,v.captures,p),a.produce(s,p[0].end),s=s.pop(),!y){s=s.safePop(),a.produce(s,c),u=!0;return}}p[0].end>o&&(o=p[0].end,n=!1)}}function Vo(t,e,n,o,s,a){let i=s.beginRuleCapturedEOL?0:-1;const l=[];for(let c=s;c;c=c.pop()){const u=c.getRule(t);u instanceof We&&l.push({rule:u,stack:c})}for(let c=l.pop();c;c=l.pop()){const{ruleScanner:u,findOptions:d}=Jo(c.rule,t,c.stack.endRule,n,o===i),f=u.findNextMatchSync(e,o,d);if(f){if(f.ruleId!==rr){s=c.stack.pop();break}f.captureIndices&&f.captureIndices.length&&(a.produce(c.stack,f.captureIndices[0].start),ke(t,e,n,c.stack,a,c.rule.whileCaptures,f.captureIndices),a.produce(c.stack,f.captureIndices[0].end),i=f.captureIndices[0].end,f.captureIndices[0].end>o&&(o=f.captureIndices[0].end,n=!1))}else{s=c.stack.pop();break}}return{stack:s,linePos:o,anchorPosition:i,isFirstLine:n}}function Ko(t,e,n,o,s,a){const i=Qo(t,e,n,o,s,a),l=t.getInjections();if(l.length===0)return i;const c=Xo(l,t,e,n,o,s,a);if(!c)return i;if(!i)return c;const u=i.captureIndices[0].start,d=c.captureIndices[0].start;return d<u||c.priorityMatch&&d===u?c:i}function Qo(t,e,n,o,s,a){const i=s.getRule(t),{ruleScanner:l,findOptions:c}=ir(i,t,s.endRule,n,o===a),u=l.findNextMatchSync(e,o,c);return u?{captureIndices:u.captureIndices,matchedRuleId:u.ruleId}:null}function Xo(t,e,n,o,s,a,i){let l=Number.MAX_VALUE,c=null,u,d=0;const f=a.contentNameScopesList.getScopeNames();for(let h=0,g=t.length;h<g;h++){const p=t[h];if(!p.matcher(f))continue;const C=e.getRule(p.ruleId),{ruleScanner:y,findOptions:v}=ir(C,e,null,o,s===i),k=y.findNextMatchSync(n,s,v);if(!k)continue;const w=k.captureIndices[0].start;if(!(w>=l)&&(l=w,c=k.captureIndices,u=k.ruleId,d=p.priority,l===s))break}return c?{priorityMatch:d===-1,captureIndices:c,matchedRuleId:u}:null}function ir(t,e,n,o,s){return{ruleScanner:t.compileAG(e,n,o,s),findOptions:0}}function Jo(t,e,n,o,s){return{ruleScanner:t.compileWhileAG(e,n,o,s),findOptions:0}}function ke(t,e,n,o,s,a,i){if(a.length===0)return;const l=e.content,c=Math.min(a.length,i.length),u=[],d=i[0].end;for(let f=0;f<c;f++){const h=a[f];if(h===null)continue;const g=i[f];if(g.length===0)continue;if(g.start>d)break;for(;u.length>0&&u[u.length-1].endPos<=g.start;)s.produceFromScopes(u[u.length-1].scopes,u[u.length-1].endPos),u.pop();if(u.length>0?s.produceFromScopes(u[u.length-1].scopes,g.start):s.produce(o,g.start),h.retokenizeCapturedWithRuleId){const C=h.getName(l,i),y=o.contentNameScopesList.pushAttributed(C,t),v=h.getContentName(l,i),k=y.pushAttributed(v,t),w=o.push(h.retokenizeCapturedWithRuleId,g.start,-1,!1,null,y,k),$=t.createOnigString(l.substring(0,g.end));ar(t,$,n&&g.start===0,g.start,w,s,!1,0),tr($);continue}const p=h.getName(l,i);if(p!==null){const y=(u.length>0?u[u.length-1].scopes:o.contentNameScopesList).pushAttributed(p,t);u.push(new Yo(y,g.end))}}for(;u.length>0;)s.produceFromScopes(u[u.length-1].scopes,u[u.length-1].endPos),u.pop()}var Yo=class{constructor(t,e){this.scopes=t,this.endPos=e}};function Zo(t,e,n,o,s,a,i,l){return new ts(t,e,n,o,s,a,i,l)}function ln(t,e,n,o,s){const a=He(e,ze),i=or.getCompiledRuleId(n,o,s.repository);for(const l of a)t.push({debugSelector:e,matcher:l.matcher,ruleId:i,grammar:s,priority:l.priority})}function ze(t,e){if(e.length<t.length)return!1;let n=0;return t.every(o=>{for(let s=n;s<e.length;s++)if(es(e[s],o))return n=s+1,!0;return!1})}function es(t,e){if(!t)return!1;if(t===e)return!0;const n=e.length;return t.length>n&&t.substr(0,n)===e&&t[n]==="."}var ts=class{constructor(t,e,n,o,s,a,i,l){if(this._rootScopeName=t,this.balancedBracketSelectors=a,this._onigLib=l,this._basicScopeAttributesProvider=new zo(n,o),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=i,this._grammar=cn(e,null),this._injections=null,this._tokenTypeMatchers=[],s)for(const c of Object.keys(s)){const u=He(c,ze);for(const d of u)this._tokenTypeMatchers.push({matcher:d.matcher,type:s[c]})}}get themeProvider(){return this._grammarRepository}dispose(){for(const t of this._ruleId2desc)t&&t.dispose()}createOnigScanner(t){return this._onigLib.createOnigScanner(t)}createOnigString(t){return this._onigLib.createOnigString(t)}getMetadataForScope(t){return this._basicScopeAttributesProvider.getBasicScopeAttributes(t)}_collectInjections(){const t={lookup:s=>s===this._rootScopeName?this._grammar:this.getExternalGrammar(s),injections:s=>this._grammarRepository.injections(s)},e=[],n=this._rootScopeName,o=t.lookup(n);if(o){const s=o.injections;if(s)for(let i in s)ln(e,i,s[i],this,o);const a=this._grammarRepository.injections(n);a&&a.forEach(i=>{const l=this.getExternalGrammar(i);if(l){const c=l.injectionSelector;c&&ln(e,c,l,this,l)}})}return e.sort((s,a)=>s.priority-a.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(t){const e=++this._lastRuleId,n=t(e);return this._ruleId2desc[e]=n,n}getRule(t){return this._ruleId2desc[t]}getExternalGrammar(t,e){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){const n=this._grammarRepository.lookup(t);if(n)return this._includedGrammars[t]=cn(n,e&&e.$base),this._includedGrammars[t]}}tokenizeLine(t,e,n=0){const o=this._tokenize(t,e,!1,n);return{tokens:o.lineTokens.getResult(o.ruleStack,o.lineLength),ruleStack:o.ruleStack,stoppedEarly:o.stoppedEarly}}tokenizeLine2(t,e,n=0){const o=this._tokenize(t,e,!0,n);return{tokens:o.lineTokens.getBinaryResult(o.ruleStack,o.lineLength),ruleStack:o.ruleStack,stoppedEarly:o.stoppedEarly}}_tokenize(t,e,n,o){this._rootId===-1&&(this._rootId=or.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let s;if(!e||e===Et.NULL){s=!0;const u=this._basicScopeAttributesProvider.getDefaultAttributes(),d=this.themeProvider.getDefaults(),f=me.set(0,u.languageId,u.tokenType,null,d.fontStyle,d.foregroundId,d.backgroundId),h=this.getRule(this._rootId).getName(null,null);let g;h?g=ve.createRootAndLookUpScopeName(h,f,this):g=ve.createRoot("unknown",f),e=new Et(null,this._rootId,-1,-1,!1,null,g,g)}else s=!1,e.reset();t=t+`
`;const a=this.createOnigString(t),i=a.content.length,l=new rs(n,t,this._tokenTypeMatchers,this.balancedBracketSelectors),c=ar(this,a,s,0,e,l,!0,o);return tr(a),{lineLength:i,lineTokens:l,ruleStack:c.stack,stoppedEarly:c.stoppedEarly}}};function cn(t,e){return t=ko(t),t.repository=t.repository||{},t.repository.$self={$vscodeTextmateLocation:t.$vscodeTextmateLocation,patterns:t.patterns,name:t.scopeName},t.repository.$base=e||t.repository.$self,t}var ve=class q{constructor(e,n,o){this.parent=e,this.scopePath=n,this.tokenAttributes=o}static fromExtension(e,n){let o=e,s=e?.scopePath??null;for(const a of n)s=lt.push(s,a.scopeNames),o=new q(o,s,a.encodedTokenAttributes);return o}static createRoot(e,n){return new q(null,new lt(null,e),n)}static createRootAndLookUpScopeName(e,n,o){const s=o.getMetadataForScope(e),a=new lt(null,e),i=o.themeProvider.themeMatch(a),l=q.mergeAttributes(n,s,i);return new q(null,a,l)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return q.equals(this,e)}static equals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.scopeName!==n.scopeName||e.tokenAttributes!==n.tokenAttributes)return!1;e=e.parent,n=n.parent}while(!0)}static mergeAttributes(e,n,o){let s=-1,a=0,i=0;return o!==null&&(s=o.fontStyle,a=o.foregroundId,i=o.backgroundId),me.set(e,n.languageId,n.tokenType,null,s,a,i)}pushAttributed(e,n){if(e===null)return this;if(e.indexOf(" ")===-1)return q._pushAttributed(this,e,n);const o=e.split(/ /g);let s=this;for(const a of o)s=q._pushAttributed(s,a,n);return s}static _pushAttributed(e,n,o){const s=o.getMetadataForScope(n),a=e.scopePath.push(n),i=o.themeProvider.themeMatch(a),l=q.mergeAttributes(e.tokenAttributes,s,i);return new q(e,a,l)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const n=[];let o=this;for(;o&&o!==e;)n.push({encodedTokenAttributes:o.tokenAttributes,scopeNames:o.scopePath.getExtensionIfDefined(o.parent?.scopePath??null)}),o=o.parent;return o===e?n.reverse():void 0}},xt=class de{constructor(e,n,o,s,a,i,l,c){this.parent=e,this.ruleId=n,this.beginRuleCapturedEOL=a,this.endRule=i,this.nameScopesList=l,this.contentNameScopesList=c,this._stackElementBrand=void 0,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=o,this._anchorPos=s}equals(e){return e===null?!1:de._equals(this,e)}static _equals(e,n){return e===n?!0:this._structuralEquals(e,n)?ve.equals(e.contentNameScopesList,n.contentNameScopesList):!1}static _structuralEquals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.depth!==n.depth||e.ruleId!==n.ruleId||e.endRule!==n.endRule)return!1;e=e.parent,n=n.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){de._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,n,o,s,a,i,l){return new de(this,e,n,o,s,a,i,l)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,n){return this.parent&&(n=this.parent._writeString(e,n)),e[n++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,n}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new de(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let n=this;for(;n&&n._enterPos===e._enterPos;){if(n.ruleId===e.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,n){const o=ve.fromExtension(e?.nameScopesList??null,n.nameScopesList);return new de(e,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,o,ve.fromExtension(o,n.contentNameScopesList))}};xt.NULL=new xt(null,0,0,0,!1,null,null,null);var Et=xt,ns=class{constructor(t,e){this.allowAny=!1,this.balancedBracketScopes=t.flatMap(n=>n==="*"?(this.allowAny=!0,[]):He(n,ze).map(o=>o.matcher)),this.unbalancedBracketScopes=e.flatMap(n=>He(n,ze).map(o=>o.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(t){for(const e of this.unbalancedBracketScopes)if(e(t))return!1;for(const e of this.balancedBracketScopes)if(e(t))return!0;return this.allowAny}},rs=class{constructor(t,e,n,o){this.balancedBracketSelectors=o,this._emitBinaryTokens=t,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}produce(t,e){this.produceFromScopes(t.contentNameScopesList,e)}produceFromScopes(t,e){if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let o=t?.tokenAttributes??0,s=!1;if(this.balancedBracketSelectors?.matchesAlways&&(s=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const a=t?.getScopeNames()??[];for(const i of this._tokenTypeOverrides)i.matcher(a)&&(o=me.set(o,0,i.type,null,-1,0,0));this.balancedBracketSelectors&&(s=this.balancedBracketSelectors.match(a))}if(s&&(o=me.set(o,0,8,s,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===o){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(o),this._lastTokenEndIndex=e;return}const n=t?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:n}),this._lastTokenEndIndex=e}getResult(t,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(t,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let o=0,s=this._binaryTokens.length;o<s;o++)n[o]=this._binaryTokens[o];return n}},os=class{constructor(t,e){this._onigLib=e,this._grammars=new Map,this._rawGrammars=new Map,this._injectionGrammars=new Map,this._theme=t}dispose(){for(const t of this._grammars.values())t.dispose()}setTheme(t){this._theme=t}getColorMap(){return this._theme.getColorMap()}addGrammar(t,e){this._rawGrammars.set(t.scopeName,t),e&&this._injectionGrammars.set(t.scopeName,e)}lookup(t){return this._rawGrammars.get(t)}injections(t){return this._injectionGrammars.get(t)}getDefaults(){return this._theme.getDefaults()}themeMatch(t){return this._theme.match(t)}grammarForScopeName(t,e,n,o,s){if(!this._grammars.has(t)){let a=this._rawGrammars.get(t);if(!a)return null;this._grammars.set(t,Zo(t,a,e,n,o,s,this,this._onigLib))}return this._grammars.get(t)}},ss=class{constructor(e){this._options=e,this._syncRegistry=new os(je.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,n){this._syncRegistry.setTheme(je.createFromRawTheme(e,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,n,o){return this.loadGrammarWithConfiguration(e,n,{embeddedLanguages:o})}loadGrammarWithConfiguration(e,n,o){return this._loadGrammar(e,n,o.embeddedLanguages,o.tokenTypes,new ns(o.balancedBracketSelectors||[],o.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,n,o,s,a){const i=new Lo(this._syncRegistry,e);for(;i.Q.length>0;)i.Q.map(l=>this._loadSingleGrammar(l.scopeName)),i.processQueue();return this._grammarForScopeName(e,n,o,s,a)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const n=this._options.loadGrammar(e);if(n){const o=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(n,o)}}addGrammar(e,n=[],o=0,s=null){return this._syncRegistry.addGrammar(e,n),this._grammarForScopeName(e.scopeName,o,s)}_grammarForScopeName(e,n=0,o=null,s=null,a=null){return this._syncRegistry.grammarForScopeName(e,n,o,s,a)}},Rt=Et.NULL;const as=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];class Be{constructor(e,n,o){this.property=e,this.normal=n,o&&(this.space=o)}}Be.prototype.property={};Be.prototype.normal={};Be.prototype.space=null;function lr(t,e){const n={},o={};let s=-1;for(;++s<t.length;)Object.assign(n,t[s].property),Object.assign(o,t[s].normal);return new Be(n,o,e)}function At(t){return t.toLowerCase()}class U{constructor(e,n){this.property=e,this.attribute=n}}U.prototype.space=null;U.prototype.boolean=!1;U.prototype.booleanish=!1;U.prototype.overloadedBoolean=!1;U.prototype.number=!1;U.prototype.commaSeparated=!1;U.prototype.spaceSeparated=!1;U.prototype.commaOrSpaceSeparated=!1;U.prototype.mustUseProperty=!1;U.prototype.defined=!1;let is=0;const x=le(),I=le(),cr=le(),b=le(),A=le(),he=le(),D=le();function le(){return 2**++is}const Nt=Object.freeze(Object.defineProperty({__proto__:null,boolean:x,booleanish:I,commaOrSpaceSeparated:D,commaSeparated:he,number:b,overloadedBoolean:cr,spaceSeparated:A},Symbol.toStringTag,{value:"Module"})),ct=Object.keys(Nt);class Ot extends U{constructor(e,n,o,s){let a=-1;if(super(e,n),un(this,"space",s),typeof o=="number")for(;++a<ct.length;){const i=ct[a];un(this,ct[a],(o&Nt[i])===Nt[i])}}}Ot.prototype.defined=!0;function un(t,e,n){n&&(t[e]=n)}const ls={}.hasOwnProperty;function be(t){const e={},n={};let o;for(o in t.properties)if(ls.call(t.properties,o)){const s=t.properties[o],a=new Ot(o,t.transform(t.attributes||{},o),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(o)&&(a.mustUseProperty=!0),e[o]=a,n[At(o)]=o,n[At(a.attribute)]=o}return new Be(e,n,t.space)}const ur=be({space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),dr=be({space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function fr(t,e){return e in t?t[e]:e}function hr(t,e){return fr(t,e.toLowerCase())}const gr=be({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:hr,properties:{xmlns:null,xmlnsXLink:null}}),pr=be({transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:I,ariaAutoComplete:null,ariaBusy:I,ariaChecked:I,ariaColCount:b,ariaColIndex:b,ariaColSpan:b,ariaControls:A,ariaCurrent:null,ariaDescribedBy:A,ariaDetails:null,ariaDisabled:I,ariaDropEffect:A,ariaErrorMessage:null,ariaExpanded:I,ariaFlowTo:A,ariaGrabbed:I,ariaHasPopup:null,ariaHidden:I,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:A,ariaLevel:b,ariaLive:null,ariaModal:I,ariaMultiLine:I,ariaMultiSelectable:I,ariaOrientation:null,ariaOwns:A,ariaPlaceholder:null,ariaPosInSet:b,ariaPressed:I,ariaReadOnly:I,ariaRelevant:null,ariaRequired:I,ariaRoleDescription:A,ariaRowCount:b,ariaRowIndex:b,ariaRowSpan:b,ariaSelected:I,ariaSetSize:b,ariaSort:null,ariaValueMax:b,ariaValueMin:b,ariaValueNow:b,ariaValueText:null,role:null}}),cs=be({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:hr,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:he,acceptCharset:A,accessKey:A,action:null,allow:null,allowFullScreen:x,allowPaymentRequest:x,allowUserMedia:x,alt:null,as:null,async:x,autoCapitalize:null,autoComplete:A,autoFocus:x,autoPlay:x,blocking:A,capture:null,charSet:null,checked:x,cite:null,className:A,cols:b,colSpan:null,content:null,contentEditable:I,controls:x,controlsList:A,coords:b|he,crossOrigin:null,data:null,dateTime:null,decoding:null,default:x,defer:x,dir:null,dirName:null,disabled:x,download:cr,draggable:I,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:x,formTarget:null,headers:A,height:b,hidden:x,high:b,href:null,hrefLang:null,htmlFor:A,httpEquiv:A,id:null,imageSizes:null,imageSrcSet:null,inert:x,inputMode:null,integrity:null,is:null,isMap:x,itemId:null,itemProp:A,itemRef:A,itemScope:x,itemType:A,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:x,low:b,manifest:null,max:null,maxLength:b,media:null,method:null,min:null,minLength:b,multiple:x,muted:x,name:null,nonce:null,noModule:x,noValidate:x,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:x,optimum:b,pattern:null,ping:A,placeholder:null,playsInline:x,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:x,referrerPolicy:null,rel:A,required:x,reversed:x,rows:b,rowSpan:b,sandbox:A,scope:null,scoped:x,seamless:x,selected:x,shadowRootClonable:x,shadowRootDelegatesFocus:x,shadowRootMode:null,shape:null,size:b,sizes:null,slot:null,span:b,spellCheck:I,src:null,srcDoc:null,srcLang:null,srcSet:null,start:b,step:null,style:null,tabIndex:b,target:null,title:null,translate:null,type:null,typeMustMatch:x,useMap:null,value:I,width:b,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:A,axis:null,background:null,bgColor:null,border:b,borderColor:null,bottomMargin:b,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:x,declare:x,event:null,face:null,frame:null,frameBorder:null,hSpace:b,leftMargin:b,link:null,longDesc:null,lowSrc:null,marginHeight:b,marginWidth:b,noResize:x,noHref:x,noShade:x,noWrap:x,object:null,profile:null,prompt:null,rev:null,rightMargin:b,rules:null,scheme:null,scrolling:I,standby:null,summary:null,text:null,topMargin:b,valueType:null,version:null,vAlign:null,vLink:null,vSpace:b,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:x,disableRemotePlayback:x,prefix:null,property:null,results:b,security:null,unselectable:null}}),us=be({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:fr,properties:{about:D,accentHeight:b,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:b,amplitude:b,arabicForm:null,ascent:b,attributeName:null,attributeType:null,azimuth:b,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:b,by:null,calcMode:null,capHeight:b,className:A,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:b,diffuseConstant:b,direction:null,display:null,dur:null,divisor:b,dominantBaseline:null,download:x,dx:null,dy:null,edgeMode:null,editable:null,elevation:b,enableBackground:null,end:null,event:null,exponent:b,externalResourcesRequired:null,fill:null,fillOpacity:b,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:he,g2:he,glyphName:he,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:b,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:b,horizOriginX:b,horizOriginY:b,id:null,ideographic:b,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:b,k:b,k1:b,k2:b,k3:b,k4:b,kernelMatrix:D,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:b,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:b,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:b,overlineThickness:b,paintOrder:null,panose1:null,path:null,pathLength:b,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:A,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:b,pointsAtY:b,pointsAtZ:b,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:D,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:D,rev:D,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:D,requiredFeatures:D,requiredFonts:D,requiredFormats:D,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:b,specularExponent:b,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:b,strikethroughThickness:b,string:null,stroke:null,strokeDashArray:D,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:b,strokeOpacity:b,strokeWidth:null,style:null,surfaceScale:b,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:D,tabIndex:b,tableValues:null,target:null,targetX:b,targetY:b,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:D,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:b,underlineThickness:b,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:b,values:null,vAlphabetic:b,vMathematical:b,vectorEffect:null,vHanging:b,vIdeographic:b,version:null,vertAdvY:b,vertOriginX:b,vertOriginY:b,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:b,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),ds=/^data[-\w.:]+$/i,dn=/-[a-z]/g,fs=/[A-Z]/g;function hs(t,e){const n=At(e);let o=e,s=U;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&ds.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(dn,ps);o="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!dn.test(a)){let i=a.replace(fs,gs);i.charAt(0)!=="-"&&(i="-"+i),e="data"+i}}s=Ot}return new s(o,e)}function gs(t){return"-"+t.toLowerCase()}function ps(t){return t.charAt(1).toUpperCase()}const ms=lr([dr,ur,gr,pr,cs],"html"),mr=lr([dr,ur,gr,pr,us],"svg"),fn={}.hasOwnProperty;function bs(t,e){const n=e||{};function o(s,...a){let i=o.invalid;const l=o.handlers;if(s&&fn.call(s,t)){const c=String(s[t]);i=fn.call(l,c)?l[c]:o.unknown}if(i)return i.call(this,s,...a)}return o.handlers=n.handlers||{},o.invalid=n.invalid,o.unknown=n.unknown,o}const ys=/["&'<>`]/g,Cs=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ks=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,_s=/[|\\{}()[\]^$+*?.]/g,hn=new WeakMap;function vs(t,e){if(t=t.replace(e.subset?Ss(e.subset):ys,o),e.subset||e.escapeOnly)return t;return t.replace(Cs,n).replace(ks,o);function n(s,a,i){return e.format((s.charCodeAt(0)-55296)*1024+s.charCodeAt(1)-56320+65536,i.charCodeAt(a+2),e)}function o(s,a,i){return e.format(s.charCodeAt(0),i.charCodeAt(a+1),e)}}function Ss(t){let e=hn.get(t);return e||(e=ws(t),hn.set(t,e)),e}function ws(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(_s,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const xs=/[\dA-Fa-f]/;function Es(t,e,n){const o="&#x"+t.toString(16).toUpperCase();return n&&e&&!xs.test(String.fromCharCode(e))?o:o+";"}const Rs=/\d/;function As(t,e,n){const o="&#"+String(t);return n&&e&&!Rs.test(String.fromCharCode(e))?o:o+";"}const Ns=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],ut={nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",fnof:"ƒ",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",bull:"•",hellip:"…",prime:"′",Prime:"″",oline:"‾",frasl:"⁄",weierp:"℘",image:"ℑ",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦",quot:'"',amp:"&",lt:"<",gt:">",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",permil:"‰",lsaquo:"‹",rsaquo:"›",euro:"€"},Bs=["cent","copy","divide","gt","lt","not","para","times"],br={}.hasOwnProperty,Bt={};let Te;for(Te in ut)br.call(ut,Te)&&(Bt[ut[Te]]=Te);const Is=/[^\dA-Za-z]/;function Ps(t,e,n,o){const s=String.fromCharCode(t);if(br.call(Bt,s)){const a=Bt[s],i="&"+a;return n&&Ns.includes(a)&&!Bs.includes(a)&&(!o||e&&e!==61&&Is.test(String.fromCharCode(e)))?i:i+";"}return""}function Ts(t,e,n){let o=Es(t,e,n.omitOptionalSemicolons),s;if((n.useNamedReferences||n.useShortestReferences)&&(s=Ps(t,e,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!s)&&n.useShortestReferences){const a=As(t,e,n.omitOptionalSemicolons);a.length<o.length&&(o=a)}return s&&(!n.useShortestReferences||s.length<o.length)?s:o}function ge(t,e){return vs(t,Object.assign({format:Ts},e))}const Ls=/^>|^->|<!--|-->|--!>|<!-$/g,Ms=[">"],$s=["<",">"];function Gs(t,e,n,o){return o.settings.bogusComments?"<?"+ge(t.value,Object.assign({},o.settings.characterReferences,{subset:Ms}))+">":"<!--"+t.value.replace(Ls,s)+"-->";function s(a){return ge(a,Object.assign({},o.settings.characterReferences,{subset:$s}))}}function Os(t,e,n,o){return"<!"+(o.settings.upperDoctype?"DOCTYPE":"doctype")+(o.settings.tightDoctype?"":" ")+"html>"}function gn(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let o=0,s=n.indexOf(e);for(;s!==-1;)o++,s=n.indexOf(e,s+e.length);return o}function Fs(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}function Ds(t){return t.join(" ").trim()}const js=/[ \t\n\f\r]/g;function Ft(t){return typeof t=="object"?t.type==="text"?pn(t.value):!1:pn(t)}function pn(t){return t.replace(js,"")===""}const T=Cr(1),yr=Cr(-1),Hs=[];function Cr(t){return e;function e(n,o,s){const a=n?n.children:Hs;let i=(o||0)+t,l=a[i];if(!s)for(;l&&Ft(l);)i+=t,l=a[i];return l}}const Us={}.hasOwnProperty;function kr(t){return e;function e(n,o,s){return Us.call(t,n.tagName)&&t[n.tagName](n,o,s)}}const Dt=kr({body:zs,caption:dt,colgroup:dt,dd:Qs,dt:Ks,head:dt,html:Ws,li:Vs,optgroup:Xs,option:Js,p:qs,rp:mn,rt:mn,tbody:Zs,td:bn,tfoot:ea,th:bn,thead:Ys,tr:ta});function dt(t,e,n){const o=T(n,e,!0);return!o||o.type!=="comment"&&!(o.type==="text"&&Ft(o.value.charAt(0)))}function Ws(t,e,n){const o=T(n,e);return!o||o.type!=="comment"}function zs(t,e,n){const o=T(n,e);return!o||o.type!=="comment"}function qs(t,e,n){const o=T(n,e);return o?o.type==="element"&&(o.tagName==="address"||o.tagName==="article"||o.tagName==="aside"||o.tagName==="blockquote"||o.tagName==="details"||o.tagName==="div"||o.tagName==="dl"||o.tagName==="fieldset"||o.tagName==="figcaption"||o.tagName==="figure"||o.tagName==="footer"||o.tagName==="form"||o.tagName==="h1"||o.tagName==="h2"||o.tagName==="h3"||o.tagName==="h4"||o.tagName==="h5"||o.tagName==="h6"||o.tagName==="header"||o.tagName==="hgroup"||o.tagName==="hr"||o.tagName==="main"||o.tagName==="menu"||o.tagName==="nav"||o.tagName==="ol"||o.tagName==="p"||o.tagName==="pre"||o.tagName==="section"||o.tagName==="table"||o.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function Vs(t,e,n){const o=T(n,e);return!o||o.type==="element"&&o.tagName==="li"}function Ks(t,e,n){const o=T(n,e);return!!(o&&o.type==="element"&&(o.tagName==="dt"||o.tagName==="dd"))}function Qs(t,e,n){const o=T(n,e);return!o||o.type==="element"&&(o.tagName==="dt"||o.tagName==="dd")}function mn(t,e,n){const o=T(n,e);return!o||o.type==="element"&&(o.tagName==="rp"||o.tagName==="rt")}function Xs(t,e,n){const o=T(n,e);return!o||o.type==="element"&&o.tagName==="optgroup"}function Js(t,e,n){const o=T(n,e);return!o||o.type==="element"&&(o.tagName==="option"||o.tagName==="optgroup")}function Ys(t,e,n){const o=T(n,e);return!!(o&&o.type==="element"&&(o.tagName==="tbody"||o.tagName==="tfoot"))}function Zs(t,e,n){const o=T(n,e);return!o||o.type==="element"&&(o.tagName==="tbody"||o.tagName==="tfoot")}function ea(t,e,n){return!T(n,e)}function ta(t,e,n){const o=T(n,e);return!o||o.type==="element"&&o.tagName==="tr"}function bn(t,e,n){const o=T(n,e);return!o||o.type==="element"&&(o.tagName==="td"||o.tagName==="th")}const na=kr({body:sa,colgroup:aa,head:oa,html:ra,tbody:ia});function ra(t){const e=T(t,-1);return!e||e.type!=="comment"}function oa(t){const e=new Set;for(const o of t.children)if(o.type==="element"&&(o.tagName==="base"||o.tagName==="title")){if(e.has(o.tagName))return!1;e.add(o.tagName)}const n=t.children[0];return!n||n.type==="element"}function sa(t){const e=T(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&Ft(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function aa(t,e,n){const o=yr(n,e),s=T(t,-1,!0);return n&&o&&o.type==="element"&&o.tagName==="colgroup"&&Dt(o,n.children.indexOf(o),n)?!1:!!(s&&s.type==="element"&&s.tagName==="col")}function ia(t,e,n){const o=yr(n,e),s=T(t,-1);return n&&o&&o.type==="element"&&(o.tagName==="thead"||o.tagName==="tbody")&&Dt(o,n.children.indexOf(o),n)?!1:!!(s&&s.type==="element"&&s.tagName==="tr")}const Le={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function la(t,e,n,o){const s=o.schema,a=s.space==="svg"?!1:o.settings.omitOptionalTags;let i=s.space==="svg"?o.settings.closeEmptyElements:o.settings.voids.includes(t.tagName.toLowerCase());const l=[];let c;s.space==="html"&&t.tagName==="svg"&&(o.schema=mr);const u=ca(o,t.properties),d=o.all(s.space==="html"&&t.tagName==="template"?t.content:t);return o.schema=s,d&&(i=!1),(u||!a||!na(t,e,n))&&(l.push("<",t.tagName,u?" "+u:""),i&&(s.space==="svg"||o.settings.closeSelfClosing)&&(c=u.charAt(u.length-1),(!o.settings.tightSelfClosing||c==="/"||c&&c!=='"'&&c!=="'")&&l.push(" "),l.push("/")),l.push(">")),l.push(d),!i&&(!a||!Dt(t,e,n))&&l.push("</"+t.tagName+">"),l.join("")}function ca(t,e){const n=[];let o=-1,s;if(e){for(s in e)if(e[s]!==null&&e[s]!==void 0){const a=ua(t,s,e[s]);a&&n.push(a)}}for(;++o<n.length;){const a=t.settings.tightAttributes?n[o].charAt(n[o].length-1):void 0;o!==n.length-1&&a!=='"'&&a!=="'"&&(n[o]+=" ")}return n.join("")}function ua(t,e,n){const o=hs(t.schema,e),s=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,a=t.settings.allowDangerousCharacters?0:1;let i=t.quote,l;if(o.overloadedBoolean&&(n===o.attribute||n==="")?n=!0:(o.boolean||o.overloadedBoolean&&typeof n!="string")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const c=ge(o.attribute,Object.assign({},t.settings.characterReferences,{subset:Le.name[s][a]}));return n===!0||(n=Array.isArray(n)?(o.commaSeparated?Fs:Ds)(n,{padLeft:!t.settings.tightCommaSeparatedLists}):String(n),t.settings.collapseEmptyAttributes&&!n)?c:(t.settings.preferUnquoted&&(l=ge(n,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:Le.unquoted[s][a]}))),l!==n&&(t.settings.quoteSmart&&gn(n,i)>gn(n,t.alternative)&&(i=t.alternative),l=i+ge(n,Object.assign({},t.settings.characterReferences,{subset:(i==="'"?Le.single:Le.double)[s][a],attribute:!0}))+i),c+(l&&"="+l))}const da=["<","&"];function _r(t,e,n,o){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?t.value:ge(t.value,Object.assign({},o.settings.characterReferences,{subset:da}))}function fa(t,e,n,o){return o.settings.allowDangerousHtml?t.value:_r(t,e,n,o)}function ha(t,e,n,o){return o.all(t)}const ga=bs("type",{invalid:pa,unknown:ma,handlers:{comment:Gs,doctype:Os,element:la,raw:fa,root:ha,text:_r}});function pa(t){throw new Error("Expected node, not `"+t+"`")}function ma(t){const e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}const ba={},ya={},Ca=[];function ka(t,e){const n=ba,o=n.quote||'"',s=o==='"'?"'":'"';if(o!=='"'&&o!=="'")throw new Error("Invalid quote `"+o+"`, expected `'` or `\"`");return{one:_a,all:va,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||as,characterReferences:n.characterReferences||ya,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?mr:ms,quote:o,alternative:s}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function _a(t,e,n){return ga(t,e,n,this)}function va(t){const e=[],n=t&&t.children||Ca;let o=-1;for(;++o<n.length;)e[o]=this.one(n[o],o,t);return e.join("")}var It={ES2018:2018,ES2024:2024,ES2025:2025};function vr(t){if(t?.target!==void 0&&!It[t.target])throw new Error(`Unexpected target "${t.target}"`);return{accuracy:"default",avoidSubclass:!1,flags:"",global:!1,hasIndices:!1,maxRecursionDepth:6,target:"ES2024",tmGrammar:!1,verbose:!1,...t}}var M=String.fromCodePoint,S=String.raw;function qe(t,{enable:e,disable:n}){return{dotAll:!n?.dotAll&&!!(e?.dotAll||t.dotAll),ignoreCase:!n?.ignoreCase&&!!(e?.ignoreCase||t.ignoreCase)}}function Se(t,e,n){return t.has(e)||t.set(e,n),t.get(e)}function Pt(t,e){return It[t]>=It[e]}function J(t,e){if(!t)throw new Error(e??"Value expected");return t}var Sa=new Set([M(304),M(305)]);function Sr(t){if(Sa.has(t))return[t];const e=new Set,n=t.toLowerCase(),o=n.toUpperCase(),s=Ra.get(n),a=Ea.get(n);return[...o].length===1&&e.add(o),e.add(n),s&&e.add(s),a&&e.add(a),[...e]}var wr=new Set(["C","Other","Cc","Control","cntrl","Cf","Format","Cn","Unassigned","Co","Private_Use","Cs","Surrogate","L","Letter","LC","Cased_Letter","Ll","Lowercase_Letter","Lm","Modifier_Letter","Lo","Other_Letter","Lt","Titlecase_Letter","Lu","Uppercase_Letter","M","Mark","Combining_Mark","Mc","Spacing_Mark","Me","Enclosing_Mark","Mn","Nonspacing_Mark","N","Number","Nd","Decimal_Number","digit","Nl","Letter_Number","No","Other_Number","P","Punctuation","punct","Pc","Connector_Punctuation","Pd","Dash_Punctuation","Pe","Close_Punctuation","Pf","Final_Punctuation","Pi","Initial_Punctuation","Po","Other_Punctuation","Ps","Open_Punctuation","S","Symbol","Sc","Currency_Symbol","Sk","Modifier_Symbol","Sm","Math_Symbol","So","Other_Symbol","Z","Separator","Zl","Line_Separator","Zp","Paragraph_Separator","Zs","Space_Separator","ASCII","ASCII_Hex_Digit","AHex","Alphabetic","Alpha","Any","Assigned","Bidi_Control","Bidi_C","Bidi_Mirrored","Bidi_M","Case_Ignorable","CI","Cased","Changes_When_Casefolded","CWCF","Changes_When_Casemapped","CWCM","Changes_When_Lowercased","CWL","Changes_When_NFKC_Casefolded","CWKCF","Changes_When_Titlecased","CWT","Changes_When_Uppercased","CWU","Dash","Default_Ignorable_Code_Point","DI","Deprecated","Dep","Diacritic","Dia","Emoji","Emoji_Component","EComp","Emoji_Modifier","EMod","Emoji_Modifier_Base","EBase","Emoji_Presentation","EPres","Extended_Pictographic","ExtPict","Extender","Ext","Grapheme_Base","Gr_Base","Grapheme_Extend","Gr_Ext","Hex_Digit","Hex","IDS_Binary_Operator","IDSB","IDS_Trinary_Operator","IDST","ID_Continue","IDC","ID_Start","IDS","Ideographic","Ideo","Join_Control","Join_C","Logical_Order_Exception","LOE","Lowercase","Lower","Math","Noncharacter_Code_Point","NChar","Pattern_Syntax","Pat_Syn","Pattern_White_Space","Pat_WS","Quotation_Mark","QMark","Radical","Regional_Indicator","RI","Sentence_Terminal","STerm","Soft_Dotted","SD","Terminal_Punctuation","Term","Unified_Ideograph","UIdeo","Uppercase","Upper","Variation_Selector","VS","White_Space","space","XID_Continue","XIDC","XID_Start","XIDS"]),xr=new Map;for(const t of wr)xr.set(Ze(t),t);var wa=new Set(["Basic_Emoji","Emoji_Keycap_Sequence","RGI_Emoji","RGI_Emoji_Flag_Sequence","RGI_Emoji_Modifier_Sequence","RGI_Emoji_Tag_Sequence","RGI_Emoji_ZWJ_Sequence"]),Er=new Map;for(const t of wa)Er.set(Ze(t),t);var xa=new Set("Dogr Dogra Gong Gunjala_Gondi Hanifi_Rohingya Maka Makasar Medefaidrin Medf Old_Sogdian Rohg Sogd Sogdian Sogo Extended_Pictographic Elym Elymaic Hmnp Nand Nandinagari Nyiakeng_Puachue_Hmong Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi EBase EComp EMod EPres ExtPict Cpmn Cypro_Minoan Old_Uyghur Ougr Tangsa Tnsa Toto Vith Vithkuqi Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz".split(" ")),Ea=new Map([[M(223),M(7838)],[M(107),M(8490)],[M(229),M(8491)],[M(969),M(8486)]]),Ra=new Map([ee(453),ee(456),ee(459),ee(498),...ft(8072,8079),...ft(8088,8095),...ft(8104,8111),ee(8124),ee(8140),ee(8188)]),Rr=new Map([["alnum",S`[\p{Alpha}\p{Nd}]`],["alpha",S`\p{Alpha}`],["ascii",S`\p{ASCII}`],["blank",S`[\p{Zs}\t]`],["cntrl",S`\p{cntrl}`],["digit",S`\p{Nd}`],["graph",S`[\P{space}&&\P{cntrl}&&\P{Cn}&&\P{Cs}]`],["lower",S`\p{Lower}`],["print",S`[[\P{space}&&\P{cntrl}&&\P{Cn}&&\P{Cs}]\p{Zs}]`],["punct",S`[\p{P}\p{S}]`],["space",S`\p{space}`],["upper",S`\p{Upper}`],["word",S`[\p{Alpha}\p{M}\p{Nd}\p{Pc}]`],["xdigit",S`\p{AHex}`]]),Aa=new Set(["alnum","blank","graph","print","word","xdigit"]);function Na(t,e){const n=[];for(let o=t;o<=e;o++)n.push(o);return n}function Ze(t){return t.replace(/[- _]+/g,"").toLowerCase()}function ee(t){const e=M(t);return[e.toLowerCase(),e]}function ft(t,e){return Na(t,e).map(n=>ee(n))}var Ar=new Set(["Lower","Lowercase","Upper","Uppercase","Ll","Lowercase_Letter","Lt","Titlecase_Letter","Lu","Uppercase_Letter"]),_={Alternator:"Alternator",Assertion:"Assertion",Backreference:"Backreference",Character:"Character",CharacterClassClose:"CharacterClassClose",CharacterClassHyphen:"CharacterClassHyphen",CharacterClassIntersector:"CharacterClassIntersector",CharacterClassOpen:"CharacterClassOpen",CharacterSet:"CharacterSet",Directive:"Directive",GroupClose:"GroupClose",GroupOpen:"GroupOpen",Subroutine:"Subroutine",Quantifier:"Quantifier",VariableLengthCharacterSet:"VariableLengthCharacterSet",EscapedNumber:"EscapedNumber"},L={any:"any",digit:"digit",dot:"dot",hex:"hex",non_newline:"non_newline",posix:"posix",property:"property",space:"space",word:"word"},et={flags:"flags",keep:"keep"},F={atomic:"atomic",capturing:"capturing",group:"group",lookahead:"lookahead",lookbehind:"lookbehind"},yn=new Map([["a",7],["b",8],["e",27],["f",12],["n",10],["r",13],["t",9],["v",11]]),Nr="c.? | C(?:-.?)?",Br=S`[pP]\{(?:\^?[\x20\w]+\})?`,Ir=S`x[89A-Fa-f]\p{AHex}(?:\\x[89A-Fa-f]\p{AHex})*`,Pr=S`u(?:\p{AHex}{4})? | x\{[^\}]*\}? | x\p{AHex}{0,2}`,Tr=S`\d{1,3}`,Lr=S`\[\^?\]?`,Mr=/[?*+][?+]?|\{(?:\d+(?:,\d*)?|,\d+)\}\??/,Me=new RegExp(S`
  \\ (?:
    ${Nr}
    | ${Br}
    | ${Ir}
    | ${Pr}
    | ${Tr}
    | [gk]<[^>]*>?
    | [gk]'[^']*'?
    | .
  )
  | \( (?: \? (?:
    [:=!>(~]
    | <[=!]
    | <[^>]*>
    | '[^']*'
    | # (?:[^)\\] | \\.?)*
    | [imx\-]+[:)]
  )?)?
  | ${Mr.source}
  | ${Lr}
  | .
`.replace(/\s+/g,""),"gsu"),ht=new RegExp(S`
  \\ (?:
    ${Nr}
    | ${Br}
    | ${Ir}
    | ${Pr}
    | ${Tr}
    | .
  )
  | \[:[^:]*:\]
  | ${Lr}
  | &&
  | .
`.replace(/\s+/g,""),"gsu");function $r(t,e=""){if(typeof t!="string")throw new Error("String expected as pattern");if(!/^[imx]*$/.test(e))throw new Error(`Flags "${e}" unsupported in Oniguruma`);const n=[e.includes("x")],o={getCurrentModX:()=>n.at(-1),numOpenGroups:0,popModX(){n.pop()},pushModX(u){n.push(u)},replaceCurrentModX(u){n[n.length-1]=u}};let s=[],a;for(Me.lastIndex=0;a=Me.exec(t);){const u=Ba(o,t,a[0],Me.lastIndex);u.tokens?s.push(...u.tokens):u.token&&s.push(u.token),u.lastIndex!==void 0&&(Me.lastIndex=u.lastIndex)}const i=[];let l=0;s.forEach(u=>{u.type===_.GroupOpen&&(u.kind===F.capturing?(l++,u.number=l):u.raw==="("&&i.push(u))}),l||i.forEach((u,d)=>{u.kind=F.capturing,u.number=d+1});const c=l||i.length;return s=s.map(u=>u.type===_.EscapedNumber?Fa(u,c):u).flat(),{tokens:s,flags:{ignoreCase:e.includes("i"),dotAll:e.includes("m"),extended:e.includes("x")}}}function Ba(t,e,n,o){const[s,a,i]=n;if(s==="["){const l=Ia(e,n,o);return{tokens:l.tokens,lastIndex:l.lastIndex}}if(s==="\\"){if("AbBGzZ".includes(a))return{token:E(_.Assertion,n,{kind:n})};if(/^\\g[<']/.test(n)){if(!/^\\g(?:<[^>]+>|'[^']+')$/.test(n))throw new Error(`Invalid group name "${n}"`);return{token:E(_.Subroutine,n)}}if(/^\\k[<']/.test(n)){if(!/^\\k(?:<[^>]+>|'[^']+')$/.test(n))throw new Error(`Invalid group name "${n}"`);return{token:E(_.Backreference,n)}}if(a==="K")return{token:E(_.Directive,n,{kind:et.keep})};if(a==="N")return{token:E(_.CharacterSet,n,{kind:L.non_newline})};if(a==="O")return{token:E(_.CharacterSet,n,{kind:L.any})};if("RX".includes(a))return{token:E(_.VariableLengthCharacterSet,n,{kind:n})};const l=Gr(n,{inCharClass:!1});return Array.isArray(l)?{tokens:l}:{token:l}}if(s==="("){if(i==="#"){if(e[o]!==")")throw new Error('Unclosed comment group "(?#"');return{lastIndex:o+1}}if("-imx".includes(i))return{token:La(n,t)};if(t.pushModX(t.getCurrentModX()),t.numOpenGroups++,n==="("||n==="(?:")return{token:E(_.GroupOpen,n,{kind:F.group})};if(n==="(?>")return{token:E(_.GroupOpen,n,{kind:F.atomic})};if(n==="(?="||n==="(?!"||n==="(?<="||n==="(?<!")return{token:E(_.GroupOpen,n,{kind:i==="<"?F.lookbehind:F.lookahead,negate:n.endsWith("!")})};if(i==="<"||i==="'")return{token:E(_.GroupOpen,n,{kind:F.capturing,name:n.slice(3,-1)})};throw i==="("?new Error(`Unsupported conditional "${n}"`):i==="~"?new Error(`Unsupported absence operator "${n}"`):n==="(?"?new Error("Invalid group"):new Error(`Unexpected group "${n}"`)}if(n===")"){if(t.popModX(),t.numOpenGroups--,t.numOpenGroups<0)throw new Error('Unmatched ")"');return{token:E(_.GroupClose,n)}}if(n==="#"&&t.getCurrentModX()){const l=e.indexOf(`
`,o);return{lastIndex:l===-1?e.length:l}}if(/^\s$/.test(n)&&t.getCurrentModX()){const l=/\s+/y;return l.lastIndex=o,{lastIndex:l.exec(e)?l.lastIndex:o}}return n==="."?{token:E(_.CharacterSet,n,{kind:L.dot})}:n==="^"||n==="$"?{token:E(_.Assertion,n,{kind:n})}:n==="|"?{token:E(_.Alternator,n)}:Mr.test(n)?{token:Ma(n)}:(Or(n),{token:E(_.Character,n,{value:n.codePointAt(0)})})}function Ia(t,e,n){kn(e);const o=[E(_.CharacterClassOpen,e,{negate:e[1]==="^"})];let s=1,a;for(ht.lastIndex=n;a=ht.exec(t);){const i=a[0];if(i[0]==="["&&i[1]!==":")kn(i),s++,o.push(E(_.CharacterClassOpen,i,{negate:i[1]==="^"}));else if(i==="]"){if(s--,o.push(E(_.CharacterClassClose,i)),!s)break}else{const l=Pa(i);Array.isArray(l)?o.push(...l):o.push(l)}}return{tokens:o,lastIndex:ht.lastIndex||t.length}}function Pa(t){if(t[0]==="\\")return Gr(t,{inCharClass:!0});if(t[0]==="["){const e=/\[:(?<negate>\^?)(?<name>[a-z]+):\]/.exec(t);if(!e||!Rr.get(e.groups.name))throw new Error(`Invalid POSIX class "${t}"`);return E(_.CharacterSet,t,{kind:L.posix,negate:!!e.groups.negate,value:e.groups.name})}return t==="-"?E(_.CharacterClassHyphen,t):t==="&&"?E(_.CharacterClassIntersector,t):(Or(t),E(_.Character,t,{value:t.codePointAt(0)}))}function Gr(t,{inCharClass:e}){const n=t[1];if(n==="c"||n==="C")return Ta(t);if("dDhHsSwW".includes(n))return $a(t);if(/^\\[pP]\{/.test(t)){if(t.length===3)throw new Error("Incomplete or invalid Unicode property");return Ga(t)}if(/^\\x[89A-Fa-f]\p{AHex}/u.test(t))try{const o=t.split(/\\x/).slice(1).map(l=>parseInt(l,16)),s=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}).decode(new Uint8Array(o)),a=new TextEncoder;return[...s].map(l=>{const c=[...a.encode(l)].map(u=>`\\x${u.toString(16)}`).join("");return E(_.Character,c,{value:l.codePointAt(0)})})}catch{throw new Error(`Too short or invalid multibyte code "${t}"`)}if(n==="u"||n==="x")return E(_.Character,t,{value:Oa(t)});if(yn.has(n))return E(_.Character,t,{value:yn.get(n)});if(/\d/.test(n))return E(_.EscapedNumber,t,{inCharClass:e});if(t==="\\")throw new Error(S`Incomplete escape "\"`);if(n==="M")throw new Error(`Unsupported meta "${t}"`);if([...t].length===2)return E(_.Character,t,{value:t.codePointAt(1)});throw new Error(`Unexpected escape "${t}"`)}function E(t,e,n){return{type:t,raw:e,...n}}function Ta(t){const e=t[1]==="c"?t[2]:t[3];if(!e||!/[A-Za-z]/.test(e))throw new Error(`Unsupported control character "${t}"`);return E(_.Character,t,{value:e.toUpperCase().codePointAt(0)-64})}function La(t,e){let{on:n,off:o}=/^\(\?(?<on>[imx]*)(?:-(?<off>[imx\-]*))?/.exec(t).groups;o??="";const s=(e.getCurrentModX()||n.includes("x"))&&!o.includes("x"),a=Cn(n),i=Cn(o),l={};if(a&&(l.enable=a),i&&(l.disable=i),t.endsWith(")"))return e.replaceCurrentModX(s),E(_.Directive,t,{kind:et.flags,flags:l});if(t.endsWith(":")){e.pushModX(s),e.numOpenGroups++;const c=E(_.GroupOpen,t,{kind:F.group});return(a||i)&&(c.flags=l),c}throw new Error(`Unexpected flag modifier "${t}"`)}function Ma(t){const e={};if(t[0]==="{"){const{min:n,max:o}=/^\{(?<min>\d*)(?:,(?<max>\d*))?/.exec(t).groups,s=1e5;if(+n>s||+o>s)throw new Error("Quantifier value unsupported in Oniguruma");e.min=+n,e.max=o===void 0?+n:o===""?1/0:+o,e.greedy=!t.endsWith("?"),e.possessive=!1}else e.min=t[0]==="+"?1:0,e.max=t[0]==="?"?1:1/0,e.greedy=t[1]!=="?",e.possessive=t[1]==="+";return E(_.Quantifier,t,e)}function $a(t){const e=t[1].toLowerCase();return E(_.CharacterSet,t,{kind:{d:L.digit,h:L.hex,s:L.space,w:L.word}[e],negate:t[1]!==e})}function Ga(t){const{p:e,neg:n,value:o}=/^\\(?<p>[pP])\{(?<neg>\^?)(?<value>[ \w]+)/.exec(t).groups,s=e==="P"&&!n||e==="p"&&!!n;return E(_.CharacterSet,t,{kind:L.property,negate:s,value:o})}function Cn(t){const e={};return t.includes("i")&&(e.ignoreCase=!0),t.includes("m")&&(e.dotAll=!0),t.includes("x")&&(e.extended=!0),Object.keys(e).length?e:null}function Oa(t){if(/^(?:\\u(?!\p{AHex}{4})|\\x(?!\p{AHex}{1,2}|\{\p{AHex}{1,8}\}))/u.test(t))throw new Error(`Incomplete or invalid escape "${t}"`);const e=t[2]==="{"?/^\\x\{\s*(?<hex>\p{AHex}+)/u.exec(t).groups.hex:t.slice(2),n=parseInt(e,16);if(n>127&&/^\\x\p{AHex}/u.test(t))throw new Error(S`\xNN above 7F unsupported in Oniguruma "${t}"`);if(n>1310719)throw new Error(`Invalid out of range "${t}"`);if(n>1114111)throw new Error(`Invalid out of range in JS "${t}"`);return n}function Fa(t,e){const{raw:n,inCharClass:o}=t,s=n.slice(1);if(!o&&(s!=="0"&&s.length===1||s[0]!=="0"&&+s<=e))return[E(_.Backreference,n)];const a=[],i=s.match(/^[0-7]+|\d/g);for(let l=0;l<i.length;l++){const c=i[l],u=l===0&&c!=="8"&&c!=="9"?parseInt(c,8):c.codePointAt(0);a.push(E(_.Character,(l===0?"\\":"")+c,{value:u}))}return a}function kn(t){if(t.endsWith("]"))throw new Error(`Empty character class "${t}" unsupported in Oniguruma`)}function Or(t){if([...t].length!==1)throw new Error(`Expected "${t}" to be a single code point`)}function pe(t,e,n){let o=t.node;for(;o.parent;)o=o.parent;function s(i,l){for(let c=0;c<i.length;c++){const u=a(i[c],l,c,i);c=Math.max(-1,c+u)}}function a(i,l=null,c=null,u=null){let d=0,f=!1;const h={node:i,parent:l,key:c,container:u,ast:o,remove(){J(u,"Container expected").splice(Math.max(0,c+d),1),d-=1},removeAllNextSiblings(){return J(u,"Container expected").splice(c+1)},removeAllPrevSiblings(){const v=c+d;return d-=v,J(u,"Container expected").splice(0,Math.max(0,v))},replaceWith(v){Da(v,l),u?u[Math.max(0,c+d)]=v:l[c]=v},skip(){f=!0}},g=ja(i).find(v=>!!n[v]),p=g&&n[g],C=typeof p=="function"?p:p?.enter,y=p?.exit;if(C?.(h,e),!f)switch(i.type){case m.Regex:a(i.pattern,i,"pattern"),a(i.flags,i,"flags");break;case m.Alternative:case m.CharacterClass:s(i.elements,i);break;case m.Assertion:ie(i)&&s(i.alternatives,i);break;case m.Backreference:case m.Character:case m.CharacterSet:case m.Directive:case m.Flags:case m.Recursion:case m.Subroutine:case m.VariableLengthCharacterSet:break;case m.CapturingGroup:case m.Group:case m.Pattern:s(i.alternatives,i);break;case m.CharacterClassIntersection:s(i.classes,i);break;case m.CharacterClassRange:a(i.min,i,"min"),a(i.max,i,"max");break;case m.Quantifier:a(i.element,i,"element");break;default:throw new Error(`Unexpected node type "${i.type}"`)}return y?.(h,e),d}a(t.node,t.parent,t.key,t.container)}function Da(t,e){"parent"in e&&(t.parent=e)}var m={Alternative:"Alternative",Assertion:"Assertion",Backreference:"Backreference",CapturingGroup:"CapturingGroup",Character:"Character",CharacterClass:"CharacterClass",CharacterClassIntersection:"CharacterClassIntersection",CharacterClassRange:"CharacterClassRange",CharacterSet:"CharacterSet",Directive:"Directive",Flags:"Flags",Group:"Group",Pattern:"Pattern",Quantifier:"Quantifier",Regex:"Regex",Subroutine:"Subroutine",VariableLengthCharacterSet:"VariableLengthCharacterSet",Recursion:"Recursion"},_n={AnyGroup:"AnyGroup",AnyNode:"AnyNode"};function ja(t){const{type:e}=t,n=[_n.AnyNode];return(ie(t)||e===m.CapturingGroup||e===m.Group)&&n.push(_n.AnyGroup),n.push(e),n}var R={line_end:"line_end",line_start:"line_start",lookahead:"lookahead",lookbehind:"lookbehind",search_start:"search_start",string_end:"string_end",string_end_newline:"string_end_newline",string_start:"string_start",word_boundary:"word_boundary"},j=L,De=et,Ve={grapheme:"grapheme",newline:"newline"};function Fr({tokens:t,flags:e},n){const o={skipBackrefValidation:!1,skipPropertyNameValidation:!1,verbose:!1,...n},s={capturingGroups:[],current:0,hasNumberedRef:!1,namedGroupsByName:new Map,parent:null,skipBackrefValidation:o.skipBackrefValidation,skipPropertyNameValidation:o.skipPropertyNameValidation,subroutines:[],token:null,tokens:t,verbose:o.verbose,walk:a};function a(h,g){const p=t[s.current];switch(s.parent=h,s.token=p,s.current++,p.type){case _.Alternator:return Z();case _.Assertion:return Dr(p);case _.Backreference:return Ha(s);case _.Character:return Hr(p.value);case _.CharacterClassHyphen:return Ua(s,g);case _.CharacterClassOpen:return Wa(s,g);case _.CharacterSet:return za(s);case _.Directive:return Ya(p);case _.GroupOpen:return qa(s,g);case _.Quantifier:return Va(s);case _.Subroutine:return Ka(s);case _.VariableLengthCharacterSet:return oi(p.kind);default:throw new Error(`Unexpected token type "${p.type}"`)}}const i=ni(ei(),Za(e));let l=i.pattern.alternatives[0];for(;s.current<t.length;){const h=a(l,{});h.type===m.Alternative?(i.pattern.alternatives.push(h),l=h):l.elements.push(h)}const{capturingGroups:c,hasNumberedRef:u,namedGroupsByName:d,subroutines:f}=s;if(u&&d.size)throw new Error("Numbered backref/subroutine not allowed when using named capture");for(const{ref:h}of f)if(typeof h=="number"){if(h>c.length)throw new Error("Subroutine uses a group number that's not defined")}else if(d.has(h)){if(d.get(h).length>1)throw new Error(S`Subroutine uses a duplicate group name "\g<${h}>"`)}else throw new Error(S`Subroutine uses a group name that's not defined "\g<${h}>"`);return pe({node:i},null,{AnyNode({node:h,parent:g}){h.parent=g}}),i}function Ha(t){const{raw:e}=t.token,n=/^\\k[<']/.test(e),o=n?e.slice(3,-1):e.slice(1),s=(a,i=!1)=>{const l=t.capturingGroups.length;let c=!1;if(a>l)if(t.skipBackrefValidation)c=!0;else throw new Error(`Not enough capturing groups defined to the left "${e}"`);return t.hasNumberedRef=!0,Tt(i?l+1-a:a,{orphan:c})};if(n){const a=/^(?<sign>-?)0*(?<num>[1-9]\d*)$/.exec(o);if(a)return s(+a.groups.num,!!a.groups.sign);if(/[-+]/.test(o))throw new Error(`Invalid backref name "${e}"`);if(!t.namedGroupsByName.has(o))throw new Error(`Group name not defined to the left "${e}"`);return Tt(o)}return s(+o)}function Ua(t,e){const{parent:n,tokens:o,walk:s}=t,a=n.elements.at(-1),i=o[t.current];if(a&&a.type!==m.CharacterClass&&a.type!==m.CharacterClassRange&&i&&i.type!==_.CharacterClassOpen&&i.type!==_.CharacterClassClose&&i.type!==_.CharacterClassIntersector){const l=s(n,e);if(a.type===m.Character&&l.type===m.Character)return n.elements.pop(),Ja(a,l);throw new Error("Invalid character class range")}return Hr(45)}function Wa(t,e){const{token:n,tokens:o,verbose:s,walk:a}=t;let i=Lt({negate:n.negate});const l=i.elements[0];let c=vn(o[t.current]);for(;c.type!==_.CharacterClassClose;){if(c.type===_.CharacterClassIntersector)l.classes.push(Lt({negate:!1,baseOnly:!0})),t.current++;else{const u=l.classes.at(-1);u.elements.push(a(u,e))}c=vn(o[t.current])}if(s||li(l),l.classes.length===1){const u=l.classes[0];u.negate=i.negate!==u.negate,i=u}return t.current++,i}function za({token:t,skipPropertyNameValidation:e}){let{kind:n,negate:o,value:s}=t;if(n===L.property){const i=Ze(s);if(Aa.has(i))n=L.posix,s=i;else return Re(s,{negate:o,skipPropertyNameValidation:e})}const a={type:m.CharacterSet,kind:J(j[n],`Unexpected character set kind "${n}"`)};return(n===L.digit||n===L.hex||n===L.posix||n===L.space||n===L.word)&&(a.negate=o,n===L.posix&&(a.value=s)),a}function qa(t,e){const{token:n,tokens:o,capturingGroups:s,namedGroupsByName:a,verbose:i,walk:l}=t;let c=Qa(n);c.type===m.CapturingGroup&&(s.push(c),c.name&&Se(a,c.name,[]).push(c));let u=Sn(o[t.current]);for(;u.type!==_.GroupClose;){if(u.type===_.Alternator)c.alternatives.push(Z()),t.current++;else{const d=c.alternatives.at(-1);d.elements.push(l(d,e))}u=Sn(o[t.current])}return i||(c=ai(c)),t.current++,c}function Va({token:t,parent:e}){const{min:n,max:o,greedy:s,possessive:a}=t,i=e.elements.at(-1);if(!i||i.type===m.Assertion||i.type===m.Directive)throw new Error("Quantifier requires a repeatable token");const l=ti(i,n,o,s,a);return e.elements.pop(),l}function Ka(t){const{token:e,capturingGroups:n,subroutines:o}=t;let s=e.raw.slice(3,-1);const a=/^(?<sign>[-+]?)0*(?<num>[1-9]\d*)$/.exec(s);if(a){const l=+a.groups.num,c=n.length;if(t.hasNumberedRef=!0,s={"":l,"+":c+l,"-":c+1-l}[a.groups.sign],s<1)throw new Error("Invalid subroutine number")}else s==="0"&&(s=0);const i=ri(s);return o.push(i),i}function Z(){return{type:m.Alternative,elements:[]}}function Dr({type:t,kind:e,negate:n}){if(t===_.GroupOpen)return jt({behind:e===F.lookbehind,negate:n});const o=J({"^":R.line_start,$:R.line_end,"\\A":R.string_start,"\\b":R.word_boundary,"\\B":R.word_boundary,"\\G":R.search_start,"\\z":R.string_end,"\\Z":R.string_end_newline}[e],`Unexpected assertion kind "${e}"`),s={type:m.Assertion,kind:o};return o===R.word_boundary&&(s.negate=e===S`\B`),s}function Tt(t,{orphan:e}={}){return{type:m.Backreference,...e&&{orphan:e},ref:t}}function Qa(t){const{kind:e,number:n,name:o,flags:s}=t;switch(e){case F.atomic:return Y({atomic:!0});case F.capturing:return jr(n,o);case F.group:return Y({flags:s});case F.lookahead:case F.lookbehind:return Dr(t);default:throw new Error(`Unexpected group kind "${e}"`)}}function jr(t,e){const n=e!==void 0;if(n&&!ii(e))throw new Error(`Group name "${e}" invalid in Oniguruma`);return{type:m.CapturingGroup,number:t,...n&&{name:e},alternatives:[Z()]}}function Hr(t){return{type:m.Character,value:t}}function Lt(t){const e={baseOnly:!1,negate:!1,...t};return{type:m.CharacterClass,negate:e.negate,elements:e.baseOnly?[]:[Xa()]}}function Xa(){return{type:m.CharacterClassIntersection,classes:[Lt({negate:!1,baseOnly:!0})]}}function Ja(t,e){if(e.value<t.value)throw new Error("Character class range out of order");return{type:m.CharacterClassRange,min:t,max:e}}function Ya({kind:t,flags:e}){const n={type:m.Directive,kind:J(De[t],`Unexpected directive kind "${t}"`)};return t===et.flags&&(n.flags=e),n}function Za({ignoreCase:t,dotAll:e,extended:n}){return{type:m.Flags,ignoreCase:t,dotAll:e,extended:n}}function Y({atomic:t,flags:e}={}){return{type:m.Group,...t&&{atomic:t},...e&&{flags:e},alternatives:[Z()]}}function jt({behind:t=!1,negate:e=!1}={}){return{type:m.Assertion,kind:t?R.lookbehind:R.lookahead,negate:e,alternatives:[Z()]}}function ei(){return{type:m.Pattern,alternatives:[Z()]}}function ti(t,e,n,o,s){if(n<e)throw new Error("Quantifier range out of order");return{type:m.Quantifier,min:e,max:n,greedy:o,possessive:s,element:t}}function ni(t,e){return{type:m.Regex,pattern:t,flags:e}}function ri(t){return{type:m.Subroutine,ref:t}}function Re(t,e){const n={negate:!1,skipPropertyNameValidation:!1,...e};return{type:m.CharacterSet,kind:j.property,value:n.skipPropertyNameValidation?t:si(t),negate:n.negate}}function oi(t){return{type:m.VariableLengthCharacterSet,kind:J({"\\R":Ve.newline,"\\X":Ve.grapheme}[t],`Unexpected varcharset kind "${t}"`)}}function si(t){const e=Ze(t);if(Er.has(e))throw new Error(S`Unicode property "\p{${t}}" unsupported in Oniguruma`);const n=xr.get(e);return n||t.trim().replace(/\s+/g,"_").replace(/[A-Z][a-z]+(?=[A-Z])/g,"$&_").replace(/[A-Za-z]+/g,o=>o[0].toUpperCase()+o.slice(1).toLowerCase())}function ai(t){const e=t.alternatives[0],n=e.elements[0];return t.type===m.Group&&t.alternatives.length===1&&e.elements.length===1&&n.type===m.Group&&!(t.atomic&&n.flags)&&!(t.flags&&(n.atomic||n.flags))?(t.atomic?n.atomic=!0:t.flags&&(n.flags=t.flags),n):t}function ie({type:t,kind:e}){return t===m.Assertion&&(e===R.lookahead||e===R.lookbehind)}function ii(t){return!/^(?:[-\d]|$)/.test(t)}function li(t){for(let e=0;e<t.classes.length;e++){const n=t.classes[e],o=n.elements[0];n.elements.length===1&&o.type===m.CharacterClass&&(t.classes[e]=o,o.negate=n.negate!==o.negate)}}function vn(t){return J(t,"Unclosed character class")}function Sn(t){return J(t,"Unclosed group")}function ci(t,e){const n=t.pattern.alternatives,o=n[0].elements[0];if(n.length>1||!o)return null;const s=n[0].elements.length===1&&(o.type===m.CapturingGroup||o.type===m.Group)&&o.alternatives.length===1,a=s?o.alternatives[0]:n[0],i=s?a.elements[0]:o;if(!i)return null;if((i.type===m.CapturingGroup||i.type===m.Group)&&i.alternatives.length===2&&i.alternatives[0].elements.length===1&&i.alternatives[1].elements.length===1){const c=i.alternatives[0].elements[0],u=i.alternatives[1].elements[0];if(c.kind===R.line_start&&u.kind===R.search_start||c.kind===R.search_start&&u.kind===R.line_start)return c.kind===R.line_start?i.alternatives.pop():i.alternatives.shift(),{name:"line_or_search_start"}}if(wn(i))return i.parent.elements.shift(),{name:"not_search_start"};const l=a.elements.findIndex(c=>wn(c));if(l>-1&&a.elements.every(c=>c.type===m.Assertion))return a.elements.splice(l,1),{name:"not_search_start"};if(ie(i)&&!i.negate&&i.alternatives.length>1){const c=[];let u=!1;if(i.alternatives.forEach(d=>{d.elements.length===1&&d.elements[0].kind===R.search_start?u=!0:c.push(d)}),u&&c.length){let d=!0;if(c.some(f=>f.elements.some(h=>h.type===m.CapturingGroup||h.type===m.Group||h.type===m.Subroutine||ie(h))))if(e==="loose")d=!1;else throw new Error(r`Uses "\G" in a way that's unsupported`);if(d){const f=ae(Y(),[ae(Z(),[Re("<<",{skipPropertyNameValidation:!0})]),...c,ae(Z(),[Re(">>",{skipPropertyNameValidation:!0})])]);return f.parent=i.parent,i.parent.elements[0]=f,{name:"after_search_start_or_subpattern"}}}}return null}function wn(t){return ie(t)&&t.negate&&t.alternatives.length===1&&t.alternatives[0].elements.length===1&&t.alternatives[0].elements[0].kind===R.search_start}var Ht=String.raw,xn=Ht`(?:\p{Emoji}\uFE0F\u20E3?|\p{Emoji_Modifier_Base}\p{Emoji_Modifier}?|\p{Emoji_Presentation})`,En=Ht`\u{E0061}-\u{E007A}`,ui=()=>new RegExp(Ht`[\u{1F1E6}-\u{1F1FF}]{2}|\u{1F3F4}[${En}]{2}[\u{E0030}-\u{E0039}${En}]{1,3}\u{E007F}|${xn}(?:\u200D${xn})*`,"gu");function di(t,e){const n={accuracy:"default",avoidSubclass:!1,bestEffortTarget:"ES2025",...e},o=n.avoidSubclass?null:ci(t,n.accuracy),s={accuracy:n.accuracy,flagDirectivesByAlt:new Map,minTargetEs2024:Pt(n.bestEffortTarget,"ES2024"),subroutineRefMap:new Map,supportedGNodes:new Set};pe({node:t},s,Ur);const a={dotAll:t.flags.dotAll,ignoreCase:t.flags.ignoreCase},i={currentFlags:a,prevFlags:null,globalFlags:a,groupOriginByCopy:new Map,groupsWithDuplicateNamesToRemove:new Set,multiplexCapturesToLeftByRef:new Map,namedGroupsInScopeByAlt:new Map,openDirectCaptures:new Set,openSubroutineRefs:new Set,reffedNodesByBackreference:new Map,subroutineRefMap:s.subroutineRefMap};pe({node:t},i,Wr);const l={groupsWithDuplicateNamesToRemove:i.groupsWithDuplicateNamesToRemove,highestOrphanBackref:0,numCapturesToLeft:0,reffedNodesByBackreference:i.reffedNodesByBackreference};return pe({node:t},l,fi),o&&(t._strategy=o),t}var Ur={Alternative:{enter({node:t,parent:e,key:n},{flagDirectivesByAlt:o}){const s=t.elements.filter(a=>a.kind===De.flags);for(let a=n+1;a<e.alternatives.length;a++){const i=e.alternatives[a];Se(o,i,[]).push(...s)}},exit({node:t},{flagDirectivesByAlt:e}){if(e.get(t)?.length){const n=qr(e.get(t));if(n){const o=_e(Y({flags:n}),t.elements);o.parent=t,t.elements=[o]}}}},Assertion({node:t,ast:e,remove:n,replaceWith:o},{accuracy:s,supportedGNodes:a}){const{kind:i,negate:l}=t;if(i===R.line_end)o(z(S`(?=\z|\n)`));else if(i===R.line_start)o(z(S`(?<=\A|\n)`));else if(i===R.search_start){if(!a.has(t)&&s!=="loose")throw new Error(S`Uses "\G" in a way that's unsupported`);e.flags.sticky=!0,n()}else if(i===R.string_end_newline)o(z(S`(?=\n?\z)`));else if(i===R.word_boundary){const c=S`[\p{L}\p{N}\p{Pc}]`,u=`(?:(?<=${c})(?!${c})|(?<!${c})(?=${c}))`,d=`(?:(?<=${c})(?=${c})|(?<!${c})(?!${c}))`;o(z(l?d:u))}},CapturingGroup({node:t},{subroutineRefMap:e}){const{name:n,number:o}=t;if(n&&!bi(n))throw new Error(`Group name "${n}" invalid in JS`);e.set(n??o,t)},CharacterSet({node:t,replaceWith:e},{accuracy:n,minTargetEs2024:o}){const{kind:s,negate:a,value:i}=t;if(s===j.any)e(Re("Any"));else if(s===j.hex)e(Re("AHex",{negate:a}));else if(s===j.non_newline)e(z(S`[^\n]`));else if(s===j.posix)if(!o&&(i==="graph"||i==="print")){if(n==="strict")throw new Error(`POSIX class "${i}" requires min target ES2024 or non-strict accuracy`);let l={graph:"!-~",print:" -~"}[i];a&&(l=`\0-${M(l.codePointAt(0)-1)}${M(l.codePointAt(2)+1)}-􏿿`),e(z(`[${l}]`))}else{const l=z(Rr.get(i));l.negate=a,e(l)}else if(s===j.property)wr.has(i)||(t.key="sc");else if(s===j.space){const l=z(`[ 	
\v\f\r]`);l.negate=a,e(l)}},Directive(t,e){const{node:n,parent:o,ast:s,remove:a,replaceWith:i,removeAllPrevSiblings:l,removeAllNextSiblings:c}=t,{kind:u,flags:d}=n;if(u===De.flags)if(!d.enable&&!d.disable)a();else{const f=_e(Y({flags:d}),c());i(f),Xr(f,t,e,Ur)}else if(u===De.keep){if(o.parent!==s.pattern||s.pattern.alternatives.length>1)throw new Error(S`Uses "\K" in a way that's unsupported`);i(_e(jt({behind:!0}),l()))}},Flags({node:t,parent:e}){delete t.extended,Object.assign(t,{global:!1,hasIndices:!1,multiline:!1,sticky:t.sticky??!1}),e.options={disable:{x:!0,n:!0},force:{v:!0}}},Group({node:t}){if(!t.flags)return;const{enable:e,disable:n}=t.flags;e?.extended&&delete e.extended,n?.extended&&delete n.extended,e?.dotAll&&n?.dotAll&&delete e.dotAll,e?.ignoreCase&&n?.ignoreCase&&delete e.ignoreCase,e&&!Object.keys(e).length&&delete t.flags.enable,n&&!Object.keys(n).length&&delete t.flags.disable,!t.flags.enable&&!t.flags.disable&&delete t.flags},Pattern({node:t},{accuracy:e,supportedGNodes:n}){const o=[];let s=!1,a=!1;for(const i of t.alternatives){const l=Kr(i.elements);l?(s=!0,Array.isArray(l)?o.push(...l):o.push(l)):a=!0}if(s&&a&&e!=="loose")throw new Error(S`Uses "\G" in a way that's unsupported`);o.forEach(i=>n.add(i))},Quantifier({node:t}){if(t.element.type===m.Quantifier){const e=_e(Y(),[t.element]);e.parent=t,t.element=e}},VariableLengthCharacterSet({node:t,replaceWith:e},{accuracy:n,minTargetEs2024:o}){const{kind:s}=t;if(s===Ve.newline)e(z(`(?>\r
?|[
\v\f\u2028\u2029])`));else if(s===Ve.grapheme){if(n==="strict")throw new Error(S`Use of "\X" requires non-strict accuracy`);const a=o?S`\p{RGI_Emoji}`:ui().source.replace(/\\u\{/g,S`\x{`);e(z(S`(?>\r\n|${a}|\P{M}\p{M}*)`,{skipPropertyNameValidation:!0}))}else throw new Error(`Unexpected varcharset kind "${s}"`)}},Wr={Alternative({node:t},{namedGroupsInScopeByAlt:e}){const n=$e(t);if(n){const o=e.get(n);o&&e.set(t,o)}},Backreference({node:t},{multiplexCapturesToLeftByRef:e,reffedNodesByBackreference:n}){const{orphan:o,ref:s}=t;o||n.set(t,[...e.get(s).map(({node:a})=>a)])},CapturingGroup:{enter({node:t,replaceWith:e,skip:n},{groupOriginByCopy:o,groupsWithDuplicateNamesToRemove:s,multiplexCapturesToLeftByRef:a,namedGroupsInScopeByAlt:i,openDirectCaptures:l,openSubroutineRefs:c}){const{name:u,number:d}=t,f=u??d,h=o.get(t),g=$e(t);if(c.has(f))throw new Error("Unsupported indirect recursion");if(h?c.add(f):l.add(t),l.has(h)){e(Rn(f)),n();return}const p=Se(a,f,[]);for(let C=0;C<p.length;C++){const y=p[C];if(h===y.node||h&&h===y.origin||t===y.origin){p.splice(C,1);break}}if(p.push({node:t,origin:h}),u){const C=Se(i,g,new Map);C.has(u)&&s.add(C.get(u)),C.set(u,t);let y=$e(g);if(y)do Se(i,y,new Map).set(u,t);while(y=$e(y))}},exit({node:t},{groupOriginByCopy:e,openDirectCaptures:n,openSubroutineRefs:o}){const{name:s,number:a}=t;e.get(t)?o.delete(s??a):n.delete(t)}},Group:{enter({node:t},e){e.prevFlags=e.currentFlags,t.flags&&(e.currentFlags=qe(e.currentFlags,t.flags))},exit(t,e){e.currentFlags=e.prevFlags}},Subroutine(t,e){const{node:n,replaceWith:o}=t,{ref:s}=n,a=e.subroutineRefMap.get(s),i=s===0,l=i?Rn(s):zr(a,e.groupOriginByCopy,null);let c=l;if(!i){const u=qr(pi(a,f=>f.type===m.Group&&!!f.flags)),d=u?qe(e.globalFlags,u):e.globalFlags;hi(d,e.currentFlags)||(c=_e(Y({flags:mi(d)}),[l]))}o(c),i||Xr(c,t,e,Wr)}},fi={Backreference({node:t,replaceWith:e},n){if(t.orphan){n.highestOrphanBackref=Math.max(n.highestOrphanBackref,t.ref);return}const s=n.reffedNodesByBackreference.get(t).filter(a=>gi(a,t));if(!s.length)e(jt({negate:!0}));else if(s.length>1){const a=s.map(i=>ae(Z(),[Tt(i.number)]));e(ae(Y(),a))}else t.ref=s[0].number},CapturingGroup({node:t},e){t.number=++e.numCapturesToLeft,e.groupsWithDuplicateNamesToRemove.has(t)&&delete t.name},Regex:{exit({node:t},e){const n=Math.max(e.highestOrphanBackref-e.numCapturesToLeft,0);for(let o=0;o<n;o++){const s=jr();t.pattern.alternatives.at(-1).elements.push(s)}}}};function ae(t,e){return e.forEach(n=>n.parent=t),t[Ut(t)]=e,t}function hi(t,e){return t.dotAll===e.dotAll&&t.ignoreCase===e.ignoreCase}function gi(t,e){let n=e;do{if(n.type===m.Pattern)return!1;if(n.type===m.Alternative)continue;if(n===t)return!1;const o=Vr(n.parent);for(const s of o){if(s===n)break;if(s===t||Qr(s,t))return!0}}while(n=n.parent);throw new Error("Unexpected path")}function zr(t,e,n,o){const s=Array.isArray(t)?[]:{};for(const[a,i]of Object.entries(t))a==="parent"?s.parent=Array.isArray(n)?o:n:i&&typeof i=="object"?s[a]=zr(i,e,s,n):(a==="type"&&i===m.CapturingGroup&&e.set(s,e.get(t)??t),s[a]=i);return s}function Rn(t){return{type:m.Recursion,ref:t}}function pi(t,e){const n=[];for(;t=t.parent;)(!e||e(t))&&n.push(t);return n}function Ut(t){for(const e of["alternatives","classes","elements"])if(t[e])return e;return null}function qr(t){const e=["dotAll","ignoreCase"],n={enable:{},disable:{}};return t.forEach(({flags:o})=>{e.forEach(s=>{o.enable?.[s]&&(delete n.disable[s],n.enable[s]=!0),o.disable?.[s]&&(n.disable[s]=!0)})}),Object.keys(n.enable).length||delete n.enable,Object.keys(n.disable).length||delete n.disable,n.enable||n.disable?n:null}function mi({dotAll:t,ignoreCase:e}){const n={};return(t||e)&&(n.enable={},t&&(n.enable.dotAll=!0),e&&(n.enable.ignoreCase=!0)),(!t||!e)&&(n.disable={},!t&&(n.disable.dotAll=!0),!e&&(n.disable.ignoreCase=!0)),n}function Vr(t){if(!t)throw new Error("Node expected");if(t.type===m.Quantifier)return[t.element];const e=Ut(t);return e&&t[e]}function Kr(t){if(!t.length)return null;const e=t[0];if(ie(e)&&!e.negate&&e.alternatives.length===1&&e.alternatives[0].elements.length){const o=e.alternatives[0].elements,s=e.kind===R.lookahead?0:o.length-1;if(o[s].kind===R.search_start)return o[s]}const n=t.find(o=>o.kind===R.search_start?!0:o.type!==m.Directive&&o.type!==m.Assertion&&!(o.type===m.Quantifier&&!o.min));if(!n)return null;if(n.kind===R.search_start)return n;if(n.type===m.Group||n.type===m.CapturingGroup){const o=[];for(const s of n.alternatives){const a=Kr(s.elements);if(!a)return null;Array.isArray(a)?o.push(...a):o.push(a)}return o}return null}function $e(t){for(;t=t.parent;)if(t.type===m.Alternative)return t;return null}function Qr(t,e){const n=Vr(t)??[];for(const o of n)if(o===e||Qr(o,e))return!0;return!1}function bi(t){return/^[$_\p{IDS}][$\u200C\u200D\p{IDC}]*$/u.test(t)}function z(t,{skipPropertyNameValidation:e}={}){const o=Fr($r(t),{skipPropertyNameValidation:e}).pattern.alternatives;return o.length>1||o[0].elements.length>1?ae(Y(),o):o[0].elements[0]}function _e(t,e){const n=Ut(t);return t[n][0].parent=t,e&&ae(t[n][0],e),t}function Xr(t,{parent:e,key:n,container:o},s,a){pe({node:t,parent:e,key:n,container:o},s,a)}function yi(t,e){const n=vr(e),o=Pt(n.target,"ES2024"),s=Pt(n.target,"ES2025"),a=n.maxRecursionDepth;if(a!==null&&(!Number.isInteger(a)||a<2||a>100))throw new Error("Invalid maxRecursionDepth; use 2-100 or null");let i=null,l=null;if(!s){const g=[t.flags.ignoreCase];pe({node:t},{getCurrentModI:()=>g.at(-1),popModI(){g.pop()},pushModI(p){g.push(p)},setHasCasedChar(){g.at(-1)?i=!0:l=!0}},Ci)}const c={dotAll:t.flags.dotAll,ignoreCase:!!((t.flags.ignoreCase||i)&&!l)};let u=null;const d={accuracy:n.accuracy,appliedGlobalFlags:c,captureFlagIMap:new Map,currentFlags:{dotAll:t.flags.dotAll,ignoreCase:t.flags.ignoreCase},groupNames:new Set,inCharClass:!1,lastNode:u,maxRecursionDepth:a,useAppliedIgnoreCase:!!(!s&&i&&l),useDuplicateNames:s,useFlagMods:s,useFlagV:o,usePostEs2018Properties:o,verbose:n.verbose};function f(g){switch(d.lastNode=u,u=g,g.type){case m.Regex:return{pattern:f(g.pattern),flags:f(g.flags),options:{...g.options}};case m.Alternative:return g.elements.map(f).join("");case m.Assertion:return wi(g,d,f);case m.Backreference:return xi(g,d);case m.CapturingGroup:return Ei(g,d,f);case m.Character:return Ri(g,d);case m.CharacterClass:return Ai(g,d,f);case m.CharacterClassIntersection:if(!d.useFlagV)throw new Error("Use of class intersection requires min target ES2024");return g.classes.map(f).join("&&");case m.CharacterClassRange:return Ni(g,d);case m.CharacterSet:return Bi(g,d);case m.Flags:return Ii(g,d);case m.Group:return Pi(g,d,f);case m.Pattern:return g.alternatives.map(f).join("|");case m.Quantifier:return f(g.element)+$i(g);case m.Recursion:return Ti(g,d);default:throw new Error(`Unexpected node type "${g.type}"`)}}const h=f(t);return o||(delete h.options.force.v,h.options.disable.v=!0,h.options.unicodeSetsPlugin=null),h}var Ci={AnyGroup:{enter({node:t},e){const n=e.getCurrentModI();e.pushModI(t.flags?qe({ignoreCase:n},t.flags).ignoreCase:n)},exit(t,e){e.popModI()}},Backreference(t,e){e.setHasCasedChar()},Character({node:t},e){Wt(M(t.value))&&e.setHasCasedChar()},CharacterClassRange({node:t,skip:e},n){e(),Jr(t,{firstOnly:!0}).length&&n.setHasCasedChar()},CharacterSet({node:t},e){t.kind===j.property&&Ar.has(t.value)&&e.setHasCasedChar()}},ki=new Set(["$","(",")","*","+",".","?","[","\\","]","^","{","|","}"]),_i=new Set(["-","\\","]","^"]),vi=new Set(["(",")","-","/","[","\\","]","^","{","|","}","!","#","$","%","&","*","+",",",".",":",";","<","=",">","?","@","`","~"]),An=new Map([[9,S`\t`],[10,S`\n`],[11,S`\v`],[12,S`\f`],[13,S`\r`],[8232,S`\u2028`],[8233,S`\u2029`],[65279,S`\uFEFF`]]),Si=/^\p{Cased}$/u;function Wt(t){return Si.test(t)}function wi(t,e,n){const{kind:o,negate:s,alternatives:a}=t;if(ie(t))return`(?${`${o===R.lookahead?"":"<"}${s?"!":"="}`}${a.map(n).join("|")})`;if(o===R.string_end)return"$";if(o===R.string_start)return"^";throw new Error(`Unexpected assertion kind "${o}"`)}function xi({ref:t},e){if(typeof t!="number")throw new Error("Unexpected named backref in transformed AST");if(!e.useFlagMods&&e.accuracy==="strict"&&e.currentFlags.ignoreCase&&!e.captureFlagIMap.get(t))throw new Error("Use of case-insensitive backref to case-sensitive group requires target ES2025 or non-strict accuracy");return"\\"+t}function Ei({name:t,number:e,alternatives:n},o,s){return t&&(o.groupNames.has(t)?o.useDuplicateNames||(t=null):o.groupNames.add(t)),o.captureFlagIMap.set(e,o.currentFlags.ignoreCase),`(${t?`?<${t}>`:""}${n.map(s).join("|")})`}function Ri({value:t},e){const n=M(t),o=fe(t,{isAfterBackref:e.lastNode.type===m.Backreference,inCharClass:e.inCharClass,useFlagV:e.useFlagV});if(o!==n)return o;if(e.useAppliedIgnoreCase&&e.currentFlags.ignoreCase&&Wt(n)){const s=Sr(n);return e.inCharClass?s.join(""):s.length>1?`[${s.join("")}]`:s[0]}return n}function Ai({negate:t,parent:e,elements:n},o,s){if(!t&&(!o.useFlagV||!o.verbose)&&e.type===m.CharacterClass&&n[0].type!==m.CharacterClassIntersection||!o.verbose&&e.type===m.CharacterClassIntersection&&n.length===1&&n[0].type!==m.CharacterClassRange)return n.map(s).join("");if(!o.useFlagV&&e.type===m.CharacterClass)throw new Error("Use of nested character class requires min target ES2024");o.inCharClass=!0;const a=`[${t?"^":""}${n.map(s).join("")}]`;return o.inCharClass=!1,a}function Ni(t,e){const n=t.min.value,o=t.max.value,s={isAfterBackref:!1,inCharClass:!0,useFlagV:e.useFlagV},a=fe(n,s),i=fe(o,s);let l="";if(e.useAppliedIgnoreCase&&e.currentFlags.ignoreCase){const c=Jr(t);Li(c).forEach(d=>{l+=Array.isArray(d)?`${fe(d[0],s)}-${fe(d[1],s)}`:fe(d,s)})}return`${a}-${i}${l}`}function Bi({kind:t,negate:e,value:n,key:o},s){if(t===j.dot)return s.currentFlags.dotAll?s.appliedGlobalFlags.dotAll||s.useFlagMods?".":"[^]":S`[^\n]`;if(t===j.digit)return e?S`\D`:S`\d`;if(t===j.property){if(!s.usePostEs2018Properties&&xa.has(n))throw new Error(`Unicode property "${n}" unavailable in target ES2018`);if(s.useAppliedIgnoreCase&&s.currentFlags.ignoreCase&&Ar.has(n))throw new Error(`Unicode property "${n}" can't be case-insensitive when other chars have specific case`);return`${e?S`\P`:S`\p`}{${o?`${o}=`:""}${n}}`}if(t===j.word)return e?S`\W`:S`\w`;throw new Error(`Unexpected character set kind "${t}"`)}function Ii(t,e){return(e.appliedGlobalFlags.ignoreCase?"i":"")+(t.dotAll?"s":"")+(t.sticky?"y":"")}function Pi({atomic:t,flags:e,parent:n,alternatives:o},s,a){const i=s.currentFlags;e&&(s.currentFlags=qe(i,e));const l=o.map(a).join("|"),c=!s.verbose&&o.length===1&&n.type!==m.Quantifier&&!t&&(!s.useFlagMods||!e)?l:`(?${Mi(t,e,s.useFlagMods)}${l})`;return s.currentFlags=i,c}function Ti({ref:t},e){const n=e.maxRecursionDepth;if(!n)throw new Error("Use of recursion disabled");if(e.accuracy==="strict")throw new Error("Use of recursion requires non-strict accuracy due to depth limit");return t===0?`(?R=${n})`:S`\g<${t}&R=${n}>`}function Jr(t,{firstOnly:e}={}){const n=t.min.value,o=t.max.value,s=[];if(n<65&&(o===65535||o>=131071)||n===65536&&o>=131071)return s;for(let a=n;a<=o;a++){const i=M(a);if(!Wt(i))continue;const l=Sr(i).filter(c=>{const u=c.codePointAt(0);return u<n||u>o});if(l.length&&(s.push(...l),e))break}return s}function fe(t,{isAfterBackref:e,inCharClass:n,useFlagV:o}){if(An.has(t))return An.get(t);if(t<32||t>126&&t<160||t>262143||e&&Gi(t))return t>255?S`\u{${t.toString(16).toUpperCase()}}`:S`\x${t.toString(16).toUpperCase().padStart(2,"0")}`;const s=n?o?vi:_i:ki,a=M(t);return(s.has(a)?"\\":"")+a}function Li(t){const e=t.map(s=>s.codePointAt(0)).sort((s,a)=>s-a),n=[];let o=null;for(let s=0;s<e.length;s++)e[s+1]===e[s]+1?o??=e[s]:o===null?n.push(e[s]):(n.push([o,e[s]]),o=null);return n}function Mi(t,e,n){if(t)return">";let o="";if(e&&n){const{enable:s,disable:a}=e;o=(s?.ignoreCase?"i":"")+(s?.dotAll?"s":"")+(a?"-":"")+(a?.ignoreCase?"i":"")+(a?.dotAll?"s":"")}return`${o}:`}function $i({min:t,max:e,greedy:n,possessive:o}){let s;return!t&&e===1?s="?":!t&&e===1/0?s="*":t===1&&e===1/0?s="+":t===e?s=`{${t}}`:s=`{${t},${e===1/0?"":e}}`,s+(o?"+":n?"":"?")}function Gi(t){return t>47&&t<58}var V=Object.freeze({DEFAULT:"DEFAULT",CHAR_CLASS:"CHAR_CLASS"});function zt(t,e,n,o){const s=new RegExp(String.raw`${e}|(?<$skip>\[\^?|\\?.)`,"gsu"),a=[!1];let i=0,l="";for(const c of t.matchAll(s)){const{0:u,groups:{$skip:d}}=c;if(!d&&(!o||o===V.DEFAULT==!i)){n instanceof Function?l+=n(c,{context:i?V.CHAR_CLASS:V.DEFAULT,negated:a[a.length-1]}):l+=n;continue}u[0]==="["?(i++,a.push(u[1]==="^")):u==="]"&&i&&(i--,a.pop()),l+=u}return l}function Oi(t,e,n,o){zt(t,e,n,o)}function Fi(t,e,n=0,o){if(!new RegExp(e,"su").test(t))return null;const s=new RegExp(`${e}|(?<$skip>\\\\?.)`,"gsu");s.lastIndex=n;let a=0,i;for(;i=s.exec(t);){const{0:l,groups:{$skip:c}}=i;if(!c&&(!o||o===V.DEFAULT==!a))return i;l==="["?a++:l==="]"&&a&&a--,s.lastIndex==i.index&&s.lastIndex++}return null}function Mt(t,e,n){return!!Fi(t,e,0,n)}function Di(t,e){const n=/\\?./gsu;n.lastIndex=e;let o=t.length,s=0,a=1,i;for(;i=n.exec(t);){const[l]=i;if(l==="[")s++;else if(s)l==="]"&&s--;else if(l==="(")a++;else if(l===")"&&(a--,!a)){o=i.index;break}}return t.slice(e,o)}(()=>{try{new RegExp("(?i:)")}catch{return!1}return!0})();(()=>{try{new RegExp("","v")}catch{return!1}return!0})();var ji=String.raw`\(\?(?:[:=!>A-Za-z\-]|<[=!]|\(DEFINE\))`,Hi=["Basic_Emoji","Emoji_Keycap_Sequence","RGI_Emoji_Modifier_Sequence","RGI_Emoji_Flag_Sequence","RGI_Emoji_Tag_Sequence","RGI_Emoji_ZWJ_Sequence","RGI_Emoji"].join("|");new RegExp(String.raw`
\\(?: c[A-Za-z]
  | p\{(?<pStrProp>${Hi})\}
  | [pP]\{[^\}]+\}
  | (?<qStrProp>q)
  | u(?:[A-Fa-f\d]{4}|\{[A-Fa-f\d]+\})
  | x[A-Fa-f\d]{2}
  | .
)
| --
| &&
| .
`.replace(/\s+/g,""),"gsu");new RegExp(String.raw`
(?<groupN>\(\?<(?![=!])|\\[gk]<)
| (?<enclosedPU>\\[pPu]\{)
| (?<enclosedQ>\\q\{)
| (?<intervalQ>\{)
| (?<incompleteT>\\(?: $
  | c(?![A-Za-z])
  | u(?![A-Fa-f\d]{4})[A-Fa-f\d]{0,3}
  | x(?![A-Fa-f\d]{2})[A-Fa-f\d]?
  )
)
| --
| \\?.
`.replace(/\s+/g,""),"gsu");function Ui(t,e,n,o){return t.slice(0,e)+o+t.slice(e+n.length)}var Nn=new RegExp(String.raw`(?<noncapturingStart>${ji})|(?<capturingStart>\((?:\?<[^>]+>)?)|\\?.`,"gsu");function Wi(t,e){if(!/\(\?>/.test(t))return t;const n="(?>",o="(?:(?=(",s=[0];let a=0,i=0,l=NaN,c;do{c=!1;let u=0,d=0,f=!1,h;for(Nn.lastIndex=Number.isNaN(l)?0:l+o.length;h=Nn.exec(t);){const{0:g,index:p,groups:{capturingStart:C,noncapturingStart:y}}=h;if(g==="[")u++;else if(u)g==="]"&&u--;else if(g===n&&!f)l=p,f=!0;else if(f&&y)d++;else if(C)f?d++:(a++,s.push(a+i));else if(g===")"&&f){if(!d){i++,t=`${t.slice(0,l)}${o}${t.slice(l+n.length,p)}))<$$${i+a}>)${t.slice(p+1)}`,c=!0;break}d--}}}while(c);return t=zt(t,String.raw`\\(?<backrefNum>[1-9]\d*)|<\$\$(?<wrappedBackrefNum>\d+)>`,({0:u,groups:{backrefNum:d,wrappedBackrefNum:f}})=>{if(d){const h=+d;if(h>s.length-1)throw new Error(`Backref "${u}" greater than number of captures`);return`\\${s[h]}`}return`\\${f}`},V.DEFAULT),t}var Yr=String.raw`(?:[?*+]|\{\d+(?:,\d*)?\})`,gt=new RegExp(String.raw`
\\(?: \d+
  | c[A-Za-z]
  | [gk]<[^>]+>
  | [pPu]\{[^\}]+\}
  | u[A-Fa-f\d]{4}
  | x[A-Fa-f\d]{2}
  )
| \((?: \? (?: [:=!>]
  | <(?:[=!]|[^>]+>)
  | [A-Za-z\-]+:
  | \(DEFINE\)
  ))?
| (?<qBase>${Yr})(?<qMod>[?+]?)(?<invalidQ>[?*+\{]?)
| \\?.
`.replace(/\s+/g,""),"gsu");function zi(t){if(!new RegExp(`${Yr}\\+`).test(t))return t;const e=[];let n=null,o=null,s="",a=0,i;for(gt.lastIndex=0;i=gt.exec(t);){const{0:l,index:c,groups:{qBase:u,qMod:d,invalidQ:f}}=i;if(l==="[")a||(o=c),a++;else if(l==="]")a?a--:o=null;else if(!a)if(d==="+"&&s&&!s.startsWith("(")){if(f)throw new Error(`Invalid quantifier "${l}"`);let h=-1;if(/^\{\d+\}$/.test(u))t=Ui(t,c+u.length,d,"");else{if(s===")"||s==="]"){const g=s===")"?n:o;if(g===null)throw new Error(`Invalid unmatched "${s}"`);t=`${t.slice(0,g)}(?>${t.slice(g,c)}${u})${t.slice(c+l.length)}`}else t=`${t.slice(0,c-s.length)}(?>${s}${u})${t.slice(c+l.length)}`;h+=4}gt.lastIndex+=h}else l[0]==="("?e.push(c):l===")"&&(n=e.length?e.pop():null);s=l}return t}var qi=String.raw`\\g<(?<gRNameOrNum>[^>&]+)&R=(?<gRDepth>[^>]+)>`,qt=String.raw`\(\?R=(?<rDepth>[^\)]+)\)|${qi}`,Vt=String.raw`\(\?<(?![=!])(?<captureName>[^>]+)>`,te=new RegExp(String.raw`${Vt}|${qt}|\\?.`,"gsu");function Vi(t){if(!new RegExp(qt,"su").test(t))return t;if(Mt(t,String.raw`\\[1-9]`,V.DEFAULT))throw new Error("Numbered backrefs cannot be used with recursion; use named backref");if(Mt(t,String.raw`\(\?\(DEFINE\)`,V.DEFAULT))throw new Error("DEFINE groups cannot be used with recursion");const e=new Map,n=[];let o=0,s=0,a;for(te.lastIndex=0;a=te.exec(t);){const{0:i,groups:{captureName:l,rDepth:c,gRNameOrNum:u,gRDepth:d}}=a;if(i==="[")o++;else if(o)i==="]"&&o--;else if(c){Bn(c);const f=t.slice(0,a.index),h=t.slice(te.lastIndex);return In(h),Pn(f,h,+c,!1)}else if(u){if(Bn(d),In(t.slice(te.lastIndex)),!n.some(C=>C.name===u||C.num===+u))throw new Error(`Recursion via \\g<${u}&R=${d}> must be used within the referenced group`);const f=e.get(u),h=Di(t,f),g=t.slice(f,a.index),p=h.slice(g.length+i.length);return t.slice(0,f)+Pn(g,p,+d,!0)+t.slice(f+h.length)}else if(l)s++,e.set(String(s),te.lastIndex),e.set(l,te.lastIndex),n.push({num:s,name:l});else if(i.startsWith("(")){const f=i==="(";f&&(s++,e.set(String(s),te.lastIndex)),n.push(f?{num:s}:{})}else i===")"&&n.pop()}return t}function Bn(t){const e=`Max depth must be integer between 2 and 100; used ${t}`;if(!/^[1-9]\d*$/.test(t))throw new Error(e);if(t=+t,t<2||t>100)throw new Error(e)}function In(t){if(Mt(t,qt,V.DEFAULT))throw new Error("Recursion can only be used once per regex")}function Pn(t,e,n,o){const s=new Set;o&&Oi(t+e,Vt,({groups:{captureName:i}})=>{s.add(i)},V.DEFAULT);const a=n-1;return`${t}${Tn(`(?:${t}`,a,o?s:null)}(?:)${Tn(`${e})`,a,o?s:null,"backward")}${e}`}function Tn(t,e,n,o="forward"){const a=l=>o==="backward"?e-l+2-1:l+2;let i="";for(let l=0;l<e;l++){const c=a(l);i+=zt(t,String.raw`${Vt}|\\k<(?<backref>[^>]+)>`,({0:u,groups:{captureName:d,backref:f}})=>{if(f&&n&&!n.has(f))return u;const h=`_$${c}`;return d?`(?<${d}${h}>`:`\\k<${f}${h}>`},V.DEFAULT)}return i}function Ki(t,e){const n=vr(e),o=$r(t,n.flags),s=Fr(o,{skipBackrefValidation:n.tmGrammar,verbose:n.verbose}),a=di(s,{accuracy:n.accuracy,avoidSubclass:n.avoidSubclass,bestEffortTarget:n.target}),i=yi(a,n);let l=Wi(zi(Vi(i.pattern))),c;a._strategy&&(l=l.replace(/\(\?:\\p{sc=<<}\|(.*?)\|\\p{sc=>>}\)/s,(d,f)=>(c=f,"")));const u={pattern:l,flags:`${n.hasIndices?"d":""}${n.global?"g":""}${i.flags}${i.options.disable.v?"u":"v"}`};return a._strategy&&(u.strategy={...a._strategy},c&&(u.strategy.subpattern=c)),u}function Qi(t,e){const n=Ki(t,e);return n.strategy?new Xi(n.pattern,n.flags,n.strategy):new RegExp(n.pattern,n.flags)}var Xi=class Zr extends RegExp{#e;constructor(e,n,o){super(e,n),o?this.#e=o:e instanceof Zr&&(this.#e=e.#e)}exec(e){const n=this.global||this.sticky,o=this.lastIndex,s=RegExp.prototype.exec;if(this.#e.name==="line_or_search_start"&&n&&this.lastIndex){this.lastIndex=0;const i=s.call(this,e.slice(o));return i&&(i.input=e,i.index+=o,this.lastIndex+=o),i}const a=n?this:new RegExp(this,`g${this.flags}`);if(this.#e.name==="not_search_start"){let i=s.call(this,e);return i?.index===o&&(a.lastIndex=i.index+1,i=s.call(a,e)),i}if(this.#e.name==="after_search_start_or_subpattern"){let i=s.call(this,e);if(!i||i.index===o)return i;const l=new RegExp(`(?:${this.#e.subpattern})$`);for(;i;){if(l.exec(e.slice(0,i.index)))return i;a.lastIndex=i.index+1,i=s.call(a,e)}return i}return s.call(this,e)}},Ji=Object.defineProperty,Yi=(t,e,n)=>e in t?Ji(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zi=(t,e,n)=>(Yi(t,e+"",n),n);const Ln=4294967295;let ue;function el(){if(ue!=null)return ue;ue="ES2018";try{new RegExp("a","v"),ue="ES2024"}catch{ue="ES2018"}return ue}function tl(t,e){return Qi(t,{accuracy:"loose",global:!0,hasIndices:!0,tmGrammar:!0,...e})}class nl{constructor(e,n={}){this.patterns=e,this.options=n,Zi(this,"regexps");const{forgiving:o=!1,cache:s,target:a="auto",simulation:i=!0,regexConstructor:l=c=>tl(c,{target:a==="auto"?el():a})}=n;this.regexps=e.map(c=>{i&&(c=c.replaceAll("(^|\\￿)","(^|\\G)"));const u=s?.get(c);if(u){if(u instanceof RegExp)return u;if(o)return null;throw u}try{const d=l(c);return s?.set(c,d),d}catch(d){if(s?.set(c,d),o)return null;throw d}})}findNextMatchSync(e,n){const o=typeof e=="string"?e:e.content,s=[];function a(i,l,c=0){return{index:i,captureIndices:l.indices.map(u=>u==null?{end:Ln,start:Ln,length:0}:{start:u[0]+c,length:u[1]-u[0],end:u[1]+c})}}for(let i=0;i<this.regexps.length;i++){const l=this.regexps[i];if(l)try{l.lastIndex=n;const c=l.exec(o);if(!c)continue;if(c.index===n)return a(i,c,0);s.push([i,c,0])}catch(c){if(this.options.forgiving)continue;throw c}}if(s.length){const i=Math.min(...s.map(l=>l[1].index));for(const[l,c,u]of s)if(c.index===i)return a(l,c,u)}return null}}function rl(t={}){const e={cache:new Map,...t};return{createScanner(n){return new nl(n,e)},createString(n){return{content:n}}}}function ol(t){return Array.isArray(t)?t:[t]}function tt(t,e=!1){const n=t.split(/(\r?\n)/g);let o=0;const s=[];for(let a=0;a<n.length;a+=2){const i=e?n[a]+(n[a+1]||""):n[a];s.push([i,o]),o+=n[a].length,o+=n[a+1]?.length||0}return s}function Kt(t){return!t||["plaintext","txt","text","plain"].includes(t)}function sl(t){return t==="ansi"||Kt(t)}function Qt(t){return t==="none"}function al(t){return Qt(t)}function eo(t,e){var n;if(!e)return t;t.properties||(t.properties={}),(n=t.properties).class||(n.class=[]),typeof t.properties.class=="string"&&(t.properties.class=t.properties.class.split(/\s+/g)),Array.isArray(t.properties.class)||(t.properties.class=[]);const o=Array.isArray(e)?e:e.split(/\s+/g);for(const s of o)s&&!t.properties.class.includes(s)&&t.properties.class.push(s);return t}function il(t,e){let n=0;const o=[];for(const s of e)s>n&&o.push({...t,content:t.content.slice(n,s),offset:t.offset+n}),n=s;return n<t.content.length&&o.push({...t,content:t.content.slice(n),offset:t.offset+n}),o}function ll(t,e){const n=Array.from(e instanceof Set?e:new Set(e)).sort((o,s)=>o-s);return n.length?t.map(o=>o.flatMap(s=>{const a=n.filter(i=>s.offset<i&&i<s.offset+s.content.length).map(i=>i-s.offset).sort((i,l)=>i-l);return a.length?il(s,a):s})):t}async function to(t){return Promise.resolve(typeof t=="function"?t():t).then(e=>e.default||e)}function Ke(t,e){const n=typeof t=="string"?{}:{...t.colorReplacements},o=typeof t=="string"?t:t.name;for(const[s,a]of Object.entries(e?.colorReplacements||{}))typeof a=="string"?n[s]=a:s===o&&Object.assign(n,a);return n}function re(t,e){return t&&(e?.[t?.toLowerCase()]||t)}function no(t){const e={};return t.color&&(e.color=t.color),t.bgColor&&(e["background-color"]=t.bgColor),t.fontStyle&&(t.fontStyle&X.Italic&&(e["font-style"]="italic"),t.fontStyle&X.Bold&&(e["font-weight"]="bold"),t.fontStyle&X.Underline&&(e["text-decoration"]="underline")),e}function cl(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}function ul(t){const e=tt(t,!0).map(([s])=>s);function n(s){if(s===t.length)return{line:e.length-1,character:e[e.length-1].length};let a=s,i=0;for(const l of e){if(a<l.length)break;a-=l.length,i++}return{line:i,character:a}}function o(s,a){let i=0;for(let l=0;l<s;l++)i+=e[l].length;return i+=a,i}return{lines:e,indexToPos:n,posToIndex:o}}class O extends Error{constructor(e){super(e),this.name="ShikiError"}}var dl=Object.defineProperty,fl=(t,e,n)=>e in t?dl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mn=(t,e,n)=>(fl(t,typeof e!="symbol"?e+"":e,n),n);const ro=new WeakMap;function nt(t,e){ro.set(t,e)}function Ae(t){return ro.get(t)}class ye{constructor(...e){if(Mn(this,"_stacks",{}),Mn(this,"lang"),e.length===2){const[n,o]=e;this.lang=o,this._stacks=n}else{const[n,o,s]=e;this.lang=o,this._stacks={[s]:n}}}get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,n){return new ye(Object.fromEntries(ol(n).map(o=>[o,Rt])),e)}getInternalStack(e=this.theme){return this._stacks[e]}get scopes(){return $n(this._stacks[this.theme])}getScopes(e=this.theme){return $n(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.scopes}}}function $n(t){const e=[],n=new Set;function o(s){if(n.has(s))return;n.add(s);const a=s?.nameScopesList?.scopeName;a&&e.push(a),s.parent&&o(s.parent)}return o(t),e}function hl(t,e){if(!(t instanceof ye))throw new O("Invalid grammar state");return t.getInternalStack(e)}function gl(){const t=new WeakMap;function e(n){if(!t.has(n.meta)){let o=function(i){if(typeof i=="number"){if(i<0||i>n.source.length)throw new O(`Invalid decoration offset: ${i}. Code length: ${n.source.length}`);return{...s.indexToPos(i),offset:i}}else{const l=s.lines[i.line];if(l===void 0)throw new O(`Invalid decoration position ${JSON.stringify(i)}. Lines length: ${s.lines.length}`);if(i.character<0||i.character>l.length)throw new O(`Invalid decoration position ${JSON.stringify(i)}. Line ${i.line} length: ${l.length}`);return{...i,offset:s.posToIndex(i.line,i.character)}}};const s=ul(n.source),a=(n.options.decorations||[]).map(i=>({...i,start:o(i.start),end:o(i.end)}));pl(a),t.set(n.meta,{decorations:a,converter:s,source:n.source})}return t.get(n.meta)}return{name:"shiki:decorations",tokens(n){if(!this.options.decorations?.length)return;const s=e(this).decorations.flatMap(i=>[i.start.offset,i.end.offset]);return ll(n,s)},code(n){if(!this.options.decorations?.length)return;const o=e(this),s=Array.from(n.children).filter(d=>d.type==="element"&&d.tagName==="span");if(s.length!==o.converter.lines.length)throw new O(`Number of lines in code element (${s.length}) does not match the number of lines in the source (${o.converter.lines.length}). Failed to apply decorations.`);function a(d,f,h,g){const p=s[d];let C="",y=-1,v=-1;if(f===0&&(y=0),h===0&&(v=0),h===Number.POSITIVE_INFINITY&&(v=p.children.length),y===-1||v===-1)for(let w=0;w<p.children.length;w++)C+=oo(p.children[w]),y===-1&&C.length===f&&(y=w+1),v===-1&&C.length===h&&(v=w+1);if(y===-1)throw new O(`Failed to find start index for decoration ${JSON.stringify(g.start)}`);if(v===-1)throw new O(`Failed to find end index for decoration ${JSON.stringify(g.end)}`);const k=p.children.slice(y,v);if(!g.alwaysWrap&&k.length===p.children.length)l(p,g,"line");else if(!g.alwaysWrap&&k.length===1&&k[0].type==="element")l(k[0],g,"token");else{const w={type:"element",tagName:"span",properties:{},children:k};l(w,g,"wrapper"),p.children.splice(y,k.length,w)}}function i(d,f){s[d]=l(s[d],f,"line")}function l(d,f,h){const g=f.properties||{},p=f.transform||(C=>C);return d.tagName=f.tagName||"span",d.properties={...d.properties,...g,class:d.properties.class},f.properties?.class&&eo(d,f.properties.class),d=p(d,h)||d,d}const c=[],u=o.decorations.sort((d,f)=>f.start.offset-d.start.offset);for(const d of u){const{start:f,end:h}=d;if(f.line===h.line)a(f.line,f.character,h.character,d);else if(f.line<h.line){a(f.line,f.character,Number.POSITIVE_INFINITY,d);for(let g=f.line+1;g<h.line;g++)c.unshift(()=>i(g,d));a(h.line,0,h.character,d)}}c.forEach(d=>d())}}}function pl(t){for(let e=0;e<t.length;e++){const n=t[e];if(n.start.offset>n.end.offset)throw new O(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let o=e+1;o<t.length;o++){const s=t[o],a=n.start.offset<s.start.offset&&s.start.offset<n.end.offset,i=n.start.offset<s.end.offset&&s.end.offset<n.end.offset,l=s.start.offset<n.start.offset&&n.start.offset<s.end.offset,c=s.start.offset<n.end.offset&&n.end.offset<s.end.offset;if(a||i||l||c){if(i&&i||l&&c)continue;throw new O(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(s.start)} intersect.`)}}}}function oo(t){return t.type==="text"?t.value:t.type==="element"?t.children.map(oo).join(""):""}const ml=[gl()];function Qe(t){return[...t.transformers||[],...ml]}var oe=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],pt={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",9:"strikethrough"};function bl(t,e){const n=t.indexOf("\x1B[",e);if(n!==-1){const o=t.indexOf("m",n);return{sequence:t.substring(n+2,o).split(";"),startPosition:n,position:o+1}}return{position:t.length}}function Gn(t,e){let n=1;const o=t[e+n++];let s;if(o==="2"){const a=[t[e+n++],t[e+n++],t[e+n]].map(i=>Number.parseInt(i));a.length===3&&!a.some(i=>Number.isNaN(i))&&(s={type:"rgb",rgb:a})}else if(o==="5"){const a=Number.parseInt(t[e+n]);Number.isNaN(a)||(s={type:"table",index:Number(a)})}return[n,s]}function yl(t){const e=[];for(let n=0;n<t.length;n++){const o=t[n],s=Number.parseInt(o);if(!Number.isNaN(s))if(s===0)e.push({type:"resetAll"});else if(s<=9)pt[s]&&e.push({type:"setDecoration",value:pt[s]});else if(s<=29){const a=pt[s-20];a&&e.push({type:"resetDecoration",value:a})}else if(s<=37)e.push({type:"setForegroundColor",value:{type:"named",name:oe[s-30]}});else if(s===38){const[a,i]=Gn(t,n);i&&e.push({type:"setForegroundColor",value:i}),n+=a}else if(s===39)e.push({type:"resetForegroundColor"});else if(s<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:oe[s-40]}});else if(s===48){const[a,i]=Gn(t,n);i&&e.push({type:"setBackgroundColor",value:i}),n+=a}else s===49?e.push({type:"resetBackgroundColor"}):s>=90&&s<=97?e.push({type:"setForegroundColor",value:{type:"named",name:oe[s-90+8]}}):s>=100&&s<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:oe[s-100+8]}})}return e}function Cl(){let t=null,e=null,n=new Set;return{parse(o){const s=[];let a=0;do{const i=bl(o,a),l=i.sequence?o.substring(a,i.startPosition):o.substring(a);if(l.length>0&&s.push({value:l,foreground:t,background:e,decorations:new Set(n)}),i.sequence){const c=yl(i.sequence);for(const u of c)u.type==="resetAll"?(t=null,e=null,n.clear()):u.type==="resetForegroundColor"?t=null:u.type==="resetBackgroundColor"?e=null:u.type==="resetDecoration"&&n.delete(u.value);for(const u of c)u.type==="setForegroundColor"?t=u.value:u.type==="setBackgroundColor"?e=u.value:u.type==="setDecoration"&&n.add(u.value)}a=i.position}while(a<o.length);return s}}}var kl={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function _l(t=kl){function e(l){return t[l]}function n(l){return`#${l.map(c=>Math.max(0,Math.min(c,255)).toString(16).padStart(2,"0")).join("")}`}let o;function s(){if(o)return o;o=[];for(let u=0;u<oe.length;u++)o.push(e(oe[u]));let l=[0,95,135,175,215,255];for(let u=0;u<6;u++)for(let d=0;d<6;d++)for(let f=0;f<6;f++)o.push(n([l[u],l[d],l[f]]));let c=8;for(let u=0;u<24;u++,c+=10)o.push(n([c,c,c]));return o}function a(l){return s()[l]}function i(l){switch(l.type){case"named":return e(l.name);case"rgb":return n(l.rgb);case"table":return a(l.index)}}return{value:i}}function vl(t,e,n){const o=Ke(t,n),s=tt(e),a=_l(Object.fromEntries(oe.map(l=>[l,t.colors?.[`terminal.ansi${l[0].toUpperCase()}${l.substring(1)}`]]))),i=Cl();return s.map(l=>i.parse(l[0]).map(c=>{let u,d;c.decorations.has("reverse")?(u=c.background?a.value(c.background):t.bg,d=c.foreground?a.value(c.foreground):t.fg):(u=c.foreground?a.value(c.foreground):t.fg,d=c.background?a.value(c.background):void 0),u=re(u,o),d=re(d,o),c.decorations.has("dim")&&(u=Sl(u));let f=X.None;return c.decorations.has("bold")&&(f|=X.Bold),c.decorations.has("italic")&&(f|=X.Italic),c.decorations.has("underline")&&(f|=X.Underline),{content:c.value,offset:l[1],color:u,bgColor:d,fontStyle:f}}))}function Sl(t){const e=t.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/);if(e)if(e[3]){const o=Math.round(Number.parseInt(e[3],16)/2).toString(16).padStart(2,"0");return`#${e[1]}${e[2]}${o}`}else return e[2]?`#${e[1]}${e[2]}80`:`#${Array.from(e[1]).map(o=>`${o}${o}`).join("")}80`;const n=t.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:t}function Xt(t,e,n={}){const{lang:o="text",theme:s=t.getLoadedThemes()[0]}=n;if(Kt(o)||Qt(s))return tt(e).map(c=>[{content:c[0],offset:c[1]}]);const{theme:a,colorMap:i}=t.setTheme(s);if(o==="ansi")return vl(a,e,n);const l=t.getLanguage(o);if(n.grammarState){if(n.grammarState.lang!==l.name)throw new se(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${l.name}"`);if(!n.grammarState.themes.includes(a.name))throw new se(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${a.name}"`)}return xl(e,l,a,i,n)}function wl(...t){if(t.length===2)return Ae(t[1]);const[e,n,o={}]=t,{lang:s="text",theme:a=e.getLoadedThemes()[0]}=o;if(Kt(s)||Qt(a))throw new se("Plain language does not have grammar state");if(s==="ansi")throw new se("ANSI language does not have grammar state");const{theme:i,colorMap:l}=e.setTheme(a),c=e.getLanguage(s);return new ye(Xe(n,c,i,l,o).stateStack,c.name,i.name)}function xl(t,e,n,o,s){const a=Xe(t,e,n,o,s),i=new ye(Xe(t,e,n,o,s).stateStack,e.name,n.name);return nt(a.tokens,i),a.tokens}function Xe(t,e,n,o,s){const a=Ke(n,s),{tokenizeMaxLineLength:i=0,tokenizeTimeLimit:l=500}=s,c=tt(t);let u=s.grammarState?hl(s.grammarState,n.name)??Rt:s.grammarContextCode!=null?Xe(s.grammarContextCode,e,n,o,{...s,grammarState:void 0,grammarContextCode:void 0}).stateStack:Rt,d=[];const f=[];for(let h=0,g=c.length;h<g;h++){const[p,C]=c[h];if(p===""){d=[],f.push([]);continue}if(i>0&&p.length>=i){d=[],f.push([{content:p,offset:C,color:"",fontStyle:0}]);continue}let y,v,k;s.includeExplanation&&(y=e.tokenizeLine(p,u),v=y.tokens,k=0);const w=e.tokenizeLine2(p,u,l),$=w.tokens.length/2;for(let B=0;B<$;B++){const K=w.tokens[2*B],W=B+1<$?w.tokens[2*B+2]:p.length;if(K===W)continue;const Ie=w.tokens[2*B+1],rt=re(o[me.getForeground(Ie)],a),ot=me.getFontStyle(Ie),st={content:p.substring(K,W),offset:C+K,color:rt,fontStyle:ot};if(s.includeExplanation){const Yt=[];if(s.includeExplanation!=="scopeName")for(const Q of n.settings){let ce;switch(typeof Q.scope){case"string":ce=Q.scope.split(/,/).map(at=>at.trim());break;case"object":ce=Q.scope;break;default:continue}Yt.push({settings:Q,selectors:ce.map(at=>at.split(/ /))})}st.explanation=[];let Zt=0;for(;K+Zt<W;){const Q=v[k],ce=p.substring(Q.startIndex,Q.endIndex);Zt+=ce.length,st.explanation.push({content:ce,scopes:s.includeExplanation==="scopeName"?El(Q.scopes):Rl(Yt,Q.scopes)}),k+=1}}d.push(st)}f.push(d),d=[],u=w.ruleStack}return{tokens:f,stateStack:u}}function El(t){return t.map(e=>({scopeName:e}))}function Rl(t,e){const n=[];for(let o=0,s=e.length;o<s;o++){const a=e[o];n[o]={scopeName:a,themeMatches:Nl(t,a,e.slice(0,o))}}return n}function On(t,e){return t===e||e.substring(0,t.length)===t&&e[t.length]==="."}function Al(t,e,n){if(!On(t[t.length-1],e))return!1;let o=t.length-2,s=n.length-1;for(;o>=0&&s>=0;)On(t[o],n[s])&&(o-=1),s-=1;return o===-1}function Nl(t,e,n){const o=[];for(const{selectors:s,settings:a}of t)for(const i of s)if(Al(i,e,n)){o.push(a);break}return o}function so(t,e,n){const o=Object.entries(n.themes).filter(c=>c[1]).map(c=>({color:c[0],theme:c[1]})),s=o.map(c=>{const u=Xt(t,e,{...n,theme:c.theme}),d=Ae(u),f=typeof c.theme=="string"?c.theme:c.theme.name;return{tokens:u,state:d,theme:f}}),a=Bl(...s.map(c=>c.tokens)),i=a[0].map((c,u)=>c.map((d,f)=>{const h={content:d.content,variants:{},offset:d.offset};return"includeExplanation"in n&&n.includeExplanation&&(h.explanation=d.explanation),a.forEach((g,p)=>{const{content:C,explanation:y,offset:v,...k}=g[u][f];h.variants[o[p].color]=k}),h})),l=s[0].state?new ye(Object.fromEntries(s.map(c=>[c.theme,c.state?.getInternalStack(c.theme)])),s[0].state.lang):void 0;return l&&nt(i,l),i}function Bl(...t){const e=t.map(()=>[]),n=t.length;for(let o=0;o<t[0].length;o++){const s=t.map(c=>c[o]),a=e.map(()=>[]);e.forEach((c,u)=>c.push(a[u]));const i=s.map(()=>0),l=s.map(c=>c[0]);for(;l.every(c=>c);){const c=Math.min(...l.map(u=>u.content.length));for(let u=0;u<n;u++){const d=l[u];d.content.length===c?(a[u].push(d),i[u]+=1,l[u]=s[u][i[u]]):(a[u].push({...d,content:d.content.slice(0,c)}),l[u]={...d,content:d.content.slice(c),offset:d.offset+c})}}}return e}function Je(t,e,n){let o,s,a,i,l,c;if("themes"in n){const{defaultColor:u="light",cssVariablePrefix:d="--shiki-"}=n,f=Object.entries(n.themes).filter(y=>y[1]).map(y=>({color:y[0],theme:y[1]})).sort((y,v)=>y.color===u?-1:v.color===u?1:0);if(f.length===0)throw new se("`themes` option must not be empty");const h=so(t,e,n);if(c=Ae(h),u&&!f.find(y=>y.color===u))throw new se(`\`themes\` option must contain the defaultColor key \`${u}\``);const g=f.map(y=>t.getTheme(y.theme)),p=f.map(y=>y.color);a=h.map(y=>y.map(v=>Il(v,p,d,u))),c&&nt(a,c);const C=f.map(y=>Ke(y.theme,n));s=f.map((y,v)=>(v===0&&u?"":`${d+y.color}:`)+(re(g[v].fg,C[v])||"inherit")).join(";"),o=f.map((y,v)=>(v===0&&u?"":`${d+y.color}-bg:`)+(re(g[v].bg,C[v])||"inherit")).join(";"),i=`shiki-themes ${g.map(y=>y.name).join(" ")}`,l=u?void 0:[s,o].join(";")}else if("theme"in n){const u=Ke(n.theme,n);a=Xt(t,e,n);const d=t.getTheme(n.theme);o=re(d.bg,u),s=re(d.fg,u),i=d.name,c=Ae(a)}else throw new se("Invalid options, either `theme` or `themes` must be provided");return{tokens:a,fg:s,bg:o,themeName:i,rootStyle:l,grammarState:c}}function Il(t,e,n,o){const s={content:t.content,explanation:t.explanation,offset:t.offset},a=e.map(c=>no(t.variants[c])),i=new Set(a.flatMap(c=>Object.keys(c))),l={};return a.forEach((c,u)=>{for(const d of i){const f=c[d]||"inherit";if(u===0&&o)l[d]=f;else{const h=d==="color"?"":d==="background-color"?"-bg":`-${d}`,g=n+e[u]+(d==="color"?"":h);l[g]=f}}}),s.htmlStyle=l,s}function Ye(t,e,n,o={meta:{},options:n,codeToHast:(s,a)=>Ye(t,s,a),codeToTokens:(s,a)=>Je(t,s,a)}){let s=e;for(const g of Qe(n))s=g.preprocess?.call(o,s,n)||s;let{tokens:a,fg:i,bg:l,themeName:c,rootStyle:u,grammarState:d}=Je(t,s,n);const{mergeWhitespaces:f=!0}=n;f===!0?a=Tl(a):f==="never"&&(a=Ll(a));const h={...o,get source(){return s}};for(const g of Qe(n))a=g.tokens?.call(h,a)||a;return Pl(a,{...n,fg:i,bg:l,themeName:c,rootStyle:u},h,d)}function Pl(t,e,n,o=Ae(t)){const s=Qe(e),a=[],i={type:"root",children:[]},{structure:l="classic",tabindex:c="0"}=e;let u={type:"element",tagName:"pre",properties:{class:`shiki ${e.themeName||""}`,style:e.rootStyle||`background-color:${e.bg};color:${e.fg}`,...c!==!1&&c!=null?{tabindex:c.toString()}:{},...Object.fromEntries(Array.from(Object.entries(e.meta||{})).filter(([p])=>!p.startsWith("_")))},children:[]},d={type:"element",tagName:"code",properties:{},children:a};const f=[],h={...n,structure:l,addClassToHast:eo,get source(){return n.source},get tokens(){return t},get options(){return e},get root(){return i},get pre(){return u},get code(){return d},get lines(){return f}};if(t.forEach((p,C)=>{C&&(l==="inline"?i.children.push({type:"element",tagName:"br",properties:{},children:[]}):l==="classic"&&a.push({type:"text",value:`
`}));let y={type:"element",tagName:"span",properties:{class:"line"},children:[]},v=0;for(const k of p){let w={type:"element",tagName:"span",properties:{...k.htmlAttrs},children:[{type:"text",value:k.content}]};k.htmlStyle;const $=cl(k.htmlStyle||no(k));$&&(w.properties.style=$);for(const B of s)w=B?.span?.call(h,w,C+1,v,y,k)||w;l==="inline"?i.children.push(w):l==="classic"&&y.children.push(w),v+=k.content.length}if(l==="classic"){for(const k of s)y=k?.line?.call(h,y,C+1)||y;f.push(y),a.push(y)}}),l==="classic"){for(const p of s)d=p?.code?.call(h,d)||d;u.children.push(d);for(const p of s)u=p?.pre?.call(h,u)||u;i.children.push(u)}let g=i;for(const p of s)g=p?.root?.call(h,g)||g;return o&&nt(g,o),g}function Tl(t){return t.map(e=>{const n=[];let o="",s=0;return e.forEach((a,i)=>{const c=!(a.fontStyle&&a.fontStyle&X.Underline);c&&a.content.match(/^\s+$/)&&e[i+1]?(s||(s=a.offset),o+=a.content):o?(c?n.push({...a,offset:s,content:o+a.content}):n.push({content:o,offset:s},a),s=0,o=""):n.push(a)}),n})}function Ll(t){return t.map(e=>e.flatMap(n=>{if(n.content.match(/^\s+$/))return n;const o=n.content.match(/^(\s*)(.*?)(\s*)$/);if(!o)return n;const[,s,a,i]=o;if(!s&&!i)return n;const l=[{...n,offset:n.offset+s.length,content:a}];return s&&l.unshift({content:s,offset:n.offset}),i&&l.push({content:i,offset:n.offset+s.length+a.length}),l}))}function Ml(t,e,n){const o={meta:{},options:n,codeToHast:(a,i)=>Ye(t,a,i),codeToTokens:(a,i)=>Je(t,a,i)};let s=ka(Ye(t,e,n,o));for(const a of Qe(n))s=a.postprocess?.call(o,s,n)||s;return s}const Fn={light:"#333333",dark:"#bbbbbb"},Dn={light:"#fffffe",dark:"#1e1e1e"},jn="__shiki_resolved";function Jt(t){if(t?.[jn])return t;const e={...t};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||(e.type="dark"),e.colorReplacements={...e.colorReplacements},e.settings||(e.settings=[]);let{bg:n,fg:o}=e;if(!n||!o){const l=e.settings?e.settings.find(c=>!c.name&&!c.scope):void 0;l?.settings?.foreground&&(o=l.settings.foreground),l?.settings?.background&&(n=l.settings.background),!o&&e?.colors?.["editor.foreground"]&&(o=e.colors["editor.foreground"]),!n&&e?.colors?.["editor.background"]&&(n=e.colors["editor.background"]),o||(o=e.type==="light"?Fn.light:Fn.dark),n||(n=e.type==="light"?Dn.light:Dn.dark),e.fg=o,e.bg=n}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let s=0;const a=new Map;function i(l){if(a.has(l))return a.get(l);s+=1;const c=`#${s.toString(16).padStart(8,"0").toLowerCase()}`;return e.colorReplacements?.[`#${c}`]?i(l):(a.set(l,c),c)}e.settings=e.settings.map(l=>{const c=l.settings?.foreground&&!l.settings.foreground.startsWith("#"),u=l.settings?.background&&!l.settings.background.startsWith("#");if(!c&&!u)return l;const d={...l,settings:{...l.settings}};if(c){const f=i(l.settings.foreground);e.colorReplacements[f]=l.settings.foreground,d.settings.foreground=f}if(u){const f=i(l.settings.background);e.colorReplacements[f]=l.settings.background,d.settings.background=f}return d});for(const l of Object.keys(e.colors||{}))if((l==="editor.foreground"||l==="editor.background"||l.startsWith("terminal.ansi"))&&!e.colors[l]?.startsWith("#")){const c=i(e.colors[l]);e.colorReplacements[c]=e.colors[l],e.colors[l]=c}return Object.defineProperty(e,jn,{enumerable:!1,writable:!1,value:!0}),e}async function $l(t){return Array.from(new Set((await Promise.all(t.filter(e=>!sl(e)).map(async e=>await to(e).then(n=>Array.isArray(n)?n:[n])))).flat()))}async function Gl(t){return(await Promise.all(t.map(async n=>al(n)?null:Jt(await to(n))))).filter(n=>!!n)}var Ol=Object.defineProperty,Fl=(t,e,n)=>e in t?Ol(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ne=(t,e,n)=>(Fl(t,typeof e!="symbol"?e+"":e,n),n);class Dl extends ss{constructor(e,n,o,s={}){super(e),this._resolver=e,this._themes=n,this._langs=o,this._alias=s,ne(this,"_resolvedThemes",new Map),ne(this,"_resolvedGrammars",new Map),ne(this,"_langMap",new Map),ne(this,"_langGraph",new Map),ne(this,"_textmateThemeCache",new WeakMap),ne(this,"_loadedThemesCache",null),ne(this,"_loadedLanguagesCache",null),this._themes.map(a=>this.loadTheme(a)),this.loadLanguages(this._langs)}getTheme(e){return typeof e=="string"?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const n=Jt(e);return n.name&&(this._resolvedThemes.set(n.name,n),this._loadedThemesCache=null),n}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let n=this._textmateThemeCache.get(e);n||(n=je.createFromRawTheme(e),this._textmateThemeCache.set(e,n)),this._syncRegistry.setTheme(n)}getGrammar(e){if(this._alias[e]){const n=new Set([e]);for(;this._alias[e];){if(e=this._alias[e],n.has(e))throw new O(`Circular alias \`${Array.from(n).join(" -> ")} -> ${e}\``);n.add(e)}}return this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const n=new Set([...this._langMap.values()].filter(a=>a.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);const o={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const s=this.loadGrammarWithConfiguration(e.scopeName,1,o);if(s.name=e.name,this._resolvedGrammars.set(e.name,s),e.aliases&&e.aliases.forEach(a=>{this._alias[a]=e.name}),this._loadedLanguagesCache=null,n.size)for(const a of n)this._resolvedGrammars.delete(a.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(a.scopeName),this._syncRegistry?._grammars?.delete(a.scopeName),this.loadLanguage(this._langMap.get(a.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const s of e)this.resolveEmbeddedLanguages(s);const n=Array.from(this._langGraph.entries()),o=n.filter(([s,a])=>!a);if(o.length){const s=n.filter(([a,i])=>i&&i.embeddedLangs?.some(l=>o.map(([c])=>c).includes(l))).filter(a=>!o.includes(a));throw new O(`Missing languages ${o.map(([a])=>`\`${a}\``).join(", ")}, required by ${s.map(([a])=>`\`${a}\``).join(", ")}`)}for(const[s,a]of n)this._resolver.addLanguage(a);for(const[s,a]of n)this.loadLanguage(a)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){if(this._langMap.set(e.name,e),this._langGraph.set(e.name,e),e.embeddedLangs)for(const n of e.embeddedLangs)this._langGraph.set(n,this._langMap.get(n))}}var jl=Object.defineProperty,Hl=(t,e,n)=>e in t?jl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ge=(t,e,n)=>(Hl(t,typeof e!="symbol"?e+"":e,n),n);class Ul{constructor(e,n){Ge(this,"_langs",new Map),Ge(this,"_scopeToLang",new Map),Ge(this,"_injections",new Map),Ge(this,"_onigLib"),this._onigLib={createOnigScanner:o=>e.createScanner(o),createOnigString:o=>e.createString(o)},n.forEach(o=>this.addLanguage(o))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(n=>{this._langs.set(n,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(e.scopeName)})}getInjections(e){const n=e.split(".");let o=[];for(let s=1;s<=n.length;s++){const a=n.slice(0,s).join(".");o=[...o,...this._injections.get(a)||[]]}return o}}let Ce=0;function Wl(t){Ce+=1,t.warnings!==!1&&Ce>=10&&Ce%10===0&&console.warn(`[Shiki] ${Ce} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!t.engine)throw new O("`engine` option is required for synchronous mode");const n=(t.langs||[]).flat(1),o=(t.themes||[]).flat(1).map(Jt),s=new Ul(t.engine,n),a=new Dl(s,o,n,t.langAlias);let i;function l(k){y();const w=a.getGrammar(typeof k=="string"?k:k.name);if(!w)throw new O(`Language \`${k}\` not found, you may need to load it first`);return w}function c(k){if(k==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};y();const w=a.getTheme(k);if(!w)throw new O(`Theme \`${k}\` not found, you may need to load it first`);return w}function u(k){y();const w=c(k);i!==k&&(a.setTheme(w),i=k);const $=a.getColorMap();return{theme:w,colorMap:$}}function d(){return y(),a.getLoadedThemes()}function f(){return y(),a.getLoadedLanguages()}function h(...k){y(),a.loadLanguages(k.flat(1))}async function g(...k){return h(await $l(k))}function p(...k){y();for(const w of k.flat(1))a.loadTheme(w)}async function C(...k){return y(),p(await Gl(k))}function y(){if(e)throw new O("Shiki instance has been disposed")}function v(){e||(e=!0,a.dispose(),Ce-=1)}return{setTheme:u,getTheme:c,getLanguage:l,getLoadedThemes:d,getLoadedLanguages:f,loadLanguage:g,loadLanguageSync:h,loadTheme:C,loadThemeSync:p,dispose:v,[Symbol.dispose]:v}}function zl(t={}){const e=Wl(t);return{getLastGrammarState:(...n)=>wl(e,...n),codeToTokensBase:(n,o)=>Xt(e,n,o),codeToTokensWithThemes:(n,o)=>so(e,n,o),codeToTokens:(n,o)=>Je(e,n,o),codeToHast:(n,o)=>Ye(e,n,o),codeToHtml:(n,o)=>Ml(e,n,o),...e,getInternalContext:()=>e}}const ql=Object.freeze(JSON.parse('{"colors":{"activityBar.activeBorder":"#f9826c","activityBar.background":"#24292e","activityBar.border":"#1b1f23","activityBar.foreground":"#e1e4e8","activityBar.inactiveForeground":"#6a737d","activityBarBadge.background":"#0366d6","activityBarBadge.foreground":"#fff","badge.background":"#044289","badge.foreground":"#c8e1ff","breadcrumb.activeSelectionForeground":"#d1d5da","breadcrumb.focusForeground":"#e1e4e8","breadcrumb.foreground":"#959da5","breadcrumbPicker.background":"#2b3036","button.background":"#176f2c","button.foreground":"#dcffe4","button.hoverBackground":"#22863a","button.secondaryBackground":"#444d56","button.secondaryForeground":"#fff","button.secondaryHoverBackground":"#586069","checkbox.background":"#444d56","checkbox.border":"#1b1f23","debugToolBar.background":"#2b3036","descriptionForeground":"#959da5","diffEditor.insertedTextBackground":"#28a74530","diffEditor.removedTextBackground":"#d73a4930","dropdown.background":"#2f363d","dropdown.border":"#1b1f23","dropdown.foreground":"#e1e4e8","dropdown.listBackground":"#24292e","editor.background":"#24292e","editor.findMatchBackground":"#ffd33d44","editor.findMatchHighlightBackground":"#ffd33d22","editor.focusedStackFrameHighlightBackground":"#2b6a3033","editor.foldBackground":"#58606915","editor.foreground":"#e1e4e8","editor.inactiveSelectionBackground":"#3392FF22","editor.lineHighlightBackground":"#2b3036","editor.linkedEditingBackground":"#3392FF22","editor.selectionBackground":"#3392FF44","editor.selectionHighlightBackground":"#17E5E633","editor.selectionHighlightBorder":"#17E5E600","editor.stackFrameHighlightBackground":"#C6902625","editor.wordHighlightBackground":"#17E5E600","editor.wordHighlightBorder":"#17E5E699","editor.wordHighlightStrongBackground":"#17E5E600","editor.wordHighlightStrongBorder":"#17E5E666","editorBracketHighlight.foreground1":"#79b8ff","editorBracketHighlight.foreground2":"#ffab70","editorBracketHighlight.foreground3":"#b392f0","editorBracketHighlight.foreground4":"#79b8ff","editorBracketHighlight.foreground5":"#ffab70","editorBracketHighlight.foreground6":"#b392f0","editorBracketMatch.background":"#17E5E650","editorBracketMatch.border":"#17E5E600","editorCursor.foreground":"#c8e1ff","editorError.foreground":"#f97583","editorGroup.border":"#1b1f23","editorGroupHeader.tabsBackground":"#1f2428","editorGroupHeader.tabsBorder":"#1b1f23","editorGutter.addedBackground":"#28a745","editorGutter.deletedBackground":"#ea4a5a","editorGutter.modifiedBackground":"#2188ff","editorIndentGuide.activeBackground":"#444d56","editorIndentGuide.background":"#2f363d","editorLineNumber.activeForeground":"#e1e4e8","editorLineNumber.foreground":"#444d56","editorOverviewRuler.border":"#1b1f23","editorWarning.foreground":"#ffea7f","editorWhitespace.foreground":"#444d56","editorWidget.background":"#1f2428","errorForeground":"#f97583","focusBorder":"#005cc5","foreground":"#d1d5da","gitDecoration.addedResourceForeground":"#34d058","gitDecoration.conflictingResourceForeground":"#ffab70","gitDecoration.deletedResourceForeground":"#ea4a5a","gitDecoration.ignoredResourceForeground":"#6a737d","gitDecoration.modifiedResourceForeground":"#79b8ff","gitDecoration.submoduleResourceForeground":"#6a737d","gitDecoration.untrackedResourceForeground":"#34d058","input.background":"#2f363d","input.border":"#1b1f23","input.foreground":"#e1e4e8","input.placeholderForeground":"#959da5","list.activeSelectionBackground":"#39414a","list.activeSelectionForeground":"#e1e4e8","list.focusBackground":"#044289","list.hoverBackground":"#282e34","list.hoverForeground":"#e1e4e8","list.inactiveFocusBackground":"#1d2d3e","list.inactiveSelectionBackground":"#282e34","list.inactiveSelectionForeground":"#e1e4e8","notificationCenterHeader.background":"#24292e","notificationCenterHeader.foreground":"#959da5","notifications.background":"#2f363d","notifications.border":"#1b1f23","notifications.foreground":"#e1e4e8","notificationsErrorIcon.foreground":"#ea4a5a","notificationsInfoIcon.foreground":"#79b8ff","notificationsWarningIcon.foreground":"#ffab70","panel.background":"#1f2428","panel.border":"#1b1f23","panelInput.border":"#2f363d","panelTitle.activeBorder":"#f9826c","panelTitle.activeForeground":"#e1e4e8","panelTitle.inactiveForeground":"#959da5","peekViewEditor.background":"#1f242888","peekViewEditor.matchHighlightBackground":"#ffd33d33","peekViewResult.background":"#1f2428","peekViewResult.matchHighlightBackground":"#ffd33d33","pickerGroup.border":"#444d56","pickerGroup.foreground":"#e1e4e8","progressBar.background":"#0366d6","quickInput.background":"#24292e","quickInput.foreground":"#e1e4e8","scrollbar.shadow":"#0008","scrollbarSlider.activeBackground":"#6a737d88","scrollbarSlider.background":"#6a737d33","scrollbarSlider.hoverBackground":"#6a737d44","settings.headerForeground":"#e1e4e8","settings.modifiedItemIndicator":"#0366d6","sideBar.background":"#1f2428","sideBar.border":"#1b1f23","sideBar.foreground":"#d1d5da","sideBarSectionHeader.background":"#1f2428","sideBarSectionHeader.border":"#1b1f23","sideBarSectionHeader.foreground":"#e1e4e8","sideBarTitle.foreground":"#e1e4e8","statusBar.background":"#24292e","statusBar.border":"#1b1f23","statusBar.debuggingBackground":"#931c06","statusBar.debuggingForeground":"#fff","statusBar.foreground":"#d1d5da","statusBar.noFolderBackground":"#24292e","statusBarItem.prominentBackground":"#282e34","statusBarItem.remoteBackground":"#24292e","statusBarItem.remoteForeground":"#d1d5da","tab.activeBackground":"#24292e","tab.activeBorder":"#24292e","tab.activeBorderTop":"#f9826c","tab.activeForeground":"#e1e4e8","tab.border":"#1b1f23","tab.hoverBackground":"#24292e","tab.inactiveBackground":"#1f2428","tab.inactiveForeground":"#959da5","tab.unfocusedActiveBorder":"#24292e","tab.unfocusedActiveBorderTop":"#1b1f23","tab.unfocusedHoverBackground":"#24292e","terminal.ansiBlack":"#586069","terminal.ansiBlue":"#2188ff","terminal.ansiBrightBlack":"#959da5","terminal.ansiBrightBlue":"#79b8ff","terminal.ansiBrightCyan":"#56d4dd","terminal.ansiBrightGreen":"#85e89d","terminal.ansiBrightMagenta":"#b392f0","terminal.ansiBrightRed":"#f97583","terminal.ansiBrightWhite":"#fafbfc","terminal.ansiBrightYellow":"#ffea7f","terminal.ansiCyan":"#39c5cf","terminal.ansiGreen":"#34d058","terminal.ansiMagenta":"#b392f0","terminal.ansiRed":"#ea4a5a","terminal.ansiWhite":"#d1d5da","terminal.ansiYellow":"#ffea7f","terminal.foreground":"#d1d5da","terminal.tab.activeBorder":"#f9826c","terminalCursor.background":"#586069","terminalCursor.foreground":"#79b8ff","textBlockQuote.background":"#24292e","textBlockQuote.border":"#444d56","textCodeBlock.background":"#2f363d","textLink.activeForeground":"#c8e1ff","textLink.foreground":"#79b8ff","textPreformat.foreground":"#d1d5da","textSeparator.foreground":"#586069","titleBar.activeBackground":"#24292e","titleBar.activeForeground":"#e1e4e8","titleBar.border":"#1b1f23","titleBar.inactiveBackground":"#1f2428","titleBar.inactiveForeground":"#959da5","tree.indentGuidesStroke":"#2f363d","welcomePage.buttonBackground":"#2f363d","welcomePage.buttonHoverBackground":"#444d56"},"displayName":"GitHub Dark","name":"github-dark","semanticHighlighting":true,"tokenColors":[{"scope":["comment","punctuation.definition.comment","string.comment"],"settings":{"foreground":"#6a737d"}},{"scope":["constant","entity.name.constant","variable.other.constant","variable.other.enummember","variable.language"],"settings":{"foreground":"#79b8ff"}},{"scope":["entity","entity.name"],"settings":{"foreground":"#b392f0"}},{"scope":"variable.parameter.function","settings":{"foreground":"#e1e4e8"}},{"scope":"entity.name.tag","settings":{"foreground":"#85e89d"}},{"scope":"keyword","settings":{"foreground":"#f97583"}},{"scope":["storage","storage.type"],"settings":{"foreground":"#f97583"}},{"scope":["storage.modifier.package","storage.modifier.import","storage.type.java"],"settings":{"foreground":"#e1e4e8"}},{"scope":["string","punctuation.definition.string","string punctuation.section.embedded source"],"settings":{"foreground":"#9ecbff"}},{"scope":"support","settings":{"foreground":"#79b8ff"}},{"scope":"meta.property-name","settings":{"foreground":"#79b8ff"}},{"scope":"variable","settings":{"foreground":"#ffab70"}},{"scope":"variable.other","settings":{"foreground":"#e1e4e8"}},{"scope":"invalid.broken","settings":{"fontStyle":"italic","foreground":"#fdaeb7"}},{"scope":"invalid.deprecated","settings":{"fontStyle":"italic","foreground":"#fdaeb7"}},{"scope":"invalid.illegal","settings":{"fontStyle":"italic","foreground":"#fdaeb7"}},{"scope":"invalid.unimplemented","settings":{"fontStyle":"italic","foreground":"#fdaeb7"}},{"scope":"carriage-return","settings":{"background":"#f97583","content":"^M","fontStyle":"italic underline","foreground":"#24292e"}},{"scope":"message.error","settings":{"foreground":"#fdaeb7"}},{"scope":"string variable","settings":{"foreground":"#79b8ff"}},{"scope":["source.regexp","string.regexp"],"settings":{"foreground":"#dbedff"}},{"scope":["string.regexp.character-class","string.regexp constant.character.escape","string.regexp source.ruby.embedded","string.regexp string.regexp.arbitrary-repitition"],"settings":{"foreground":"#dbedff"}},{"scope":"string.regexp constant.character.escape","settings":{"fontStyle":"bold","foreground":"#85e89d"}},{"scope":"support.constant","settings":{"foreground":"#79b8ff"}},{"scope":"support.variable","settings":{"foreground":"#79b8ff"}},{"scope":"meta.module-reference","settings":{"foreground":"#79b8ff"}},{"scope":"punctuation.definition.list.begin.markdown","settings":{"foreground":"#ffab70"}},{"scope":["markup.heading","markup.heading entity.name"],"settings":{"fontStyle":"bold","foreground":"#79b8ff"}},{"scope":"markup.quote","settings":{"foreground":"#85e89d"}},{"scope":"markup.italic","settings":{"fontStyle":"italic","foreground":"#e1e4e8"}},{"scope":"markup.bold","settings":{"fontStyle":"bold","foreground":"#e1e4e8"}},{"scope":["markup.underline"],"settings":{"fontStyle":"underline"}},{"scope":["markup.strikethrough"],"settings":{"fontStyle":"strikethrough"}},{"scope":"markup.inline.raw","settings":{"foreground":"#79b8ff"}},{"scope":["markup.deleted","meta.diff.header.from-file","punctuation.definition.deleted"],"settings":{"background":"#86181d","foreground":"#fdaeb7"}},{"scope":["markup.inserted","meta.diff.header.to-file","punctuation.definition.inserted"],"settings":{"background":"#144620","foreground":"#85e89d"}},{"scope":["markup.changed","punctuation.definition.changed"],"settings":{"background":"#c24e00","foreground":"#ffab70"}},{"scope":["markup.ignored","markup.untracked"],"settings":{"background":"#79b8ff","foreground":"#2f363d"}},{"scope":"meta.diff.range","settings":{"fontStyle":"bold","foreground":"#b392f0"}},{"scope":"meta.diff.header","settings":{"foreground":"#79b8ff"}},{"scope":"meta.separator","settings":{"fontStyle":"bold","foreground":"#79b8ff"}},{"scope":"meta.output","settings":{"foreground":"#79b8ff"}},{"scope":["brackethighlighter.tag","brackethighlighter.curly","brackethighlighter.round","brackethighlighter.square","brackethighlighter.angle","brackethighlighter.quote"],"settings":{"foreground":"#d1d5da"}},{"scope":"brackethighlighter.unmatched","settings":{"foreground":"#fdaeb7"}},{"scope":["constant.other.reference.link","string.other.link"],"settings":{"fontStyle":"underline","foreground":"#dbedff"}}],"type":"dark"}')),Vl=Object.freeze(JSON.parse('{"colors":{"activityBar.activeBorder":"#f9826c","activityBar.background":"#fff","activityBar.border":"#e1e4e8","activityBar.foreground":"#2f363d","activityBar.inactiveForeground":"#959da5","activityBarBadge.background":"#2188ff","activityBarBadge.foreground":"#fff","badge.background":"#dbedff","badge.foreground":"#005cc5","breadcrumb.activeSelectionForeground":"#586069","breadcrumb.focusForeground":"#2f363d","breadcrumb.foreground":"#6a737d","breadcrumbPicker.background":"#fafbfc","button.background":"#159739","button.foreground":"#fff","button.hoverBackground":"#138934","button.secondaryBackground":"#e1e4e8","button.secondaryForeground":"#1b1f23","button.secondaryHoverBackground":"#d1d5da","checkbox.background":"#fafbfc","checkbox.border":"#d1d5da","debugToolBar.background":"#fff","descriptionForeground":"#6a737d","diffEditor.insertedTextBackground":"#34d05822","diffEditor.removedTextBackground":"#d73a4922","dropdown.background":"#fafbfc","dropdown.border":"#e1e4e8","dropdown.foreground":"#2f363d","dropdown.listBackground":"#fff","editor.background":"#fff","editor.findMatchBackground":"#ffdf5d","editor.findMatchHighlightBackground":"#ffdf5d66","editor.focusedStackFrameHighlightBackground":"#28a74525","editor.foldBackground":"#d1d5da11","editor.foreground":"#24292e","editor.inactiveSelectionBackground":"#0366d611","editor.lineHighlightBackground":"#f6f8fa","editor.linkedEditingBackground":"#0366d611","editor.selectionBackground":"#0366d625","editor.selectionHighlightBackground":"#34d05840","editor.selectionHighlightBorder":"#34d05800","editor.stackFrameHighlightBackground":"#ffd33d33","editor.wordHighlightBackground":"#34d05800","editor.wordHighlightBorder":"#24943e99","editor.wordHighlightStrongBackground":"#34d05800","editor.wordHighlightStrongBorder":"#24943e50","editorBracketHighlight.foreground1":"#005cc5","editorBracketHighlight.foreground2":"#e36209","editorBracketHighlight.foreground3":"#5a32a3","editorBracketHighlight.foreground4":"#005cc5","editorBracketHighlight.foreground5":"#e36209","editorBracketHighlight.foreground6":"#5a32a3","editorBracketMatch.background":"#34d05840","editorBracketMatch.border":"#34d05800","editorCursor.foreground":"#044289","editorError.foreground":"#cb2431","editorGroup.border":"#e1e4e8","editorGroupHeader.tabsBackground":"#f6f8fa","editorGroupHeader.tabsBorder":"#e1e4e8","editorGutter.addedBackground":"#28a745","editorGutter.deletedBackground":"#d73a49","editorGutter.modifiedBackground":"#2188ff","editorIndentGuide.activeBackground":"#d7dbe0","editorIndentGuide.background":"#eff2f6","editorLineNumber.activeForeground":"#24292e","editorLineNumber.foreground":"#1b1f234d","editorOverviewRuler.border":"#fff","editorWarning.foreground":"#f9c513","editorWhitespace.foreground":"#d1d5da","editorWidget.background":"#f6f8fa","errorForeground":"#cb2431","focusBorder":"#2188ff","foreground":"#444d56","gitDecoration.addedResourceForeground":"#28a745","gitDecoration.conflictingResourceForeground":"#e36209","gitDecoration.deletedResourceForeground":"#d73a49","gitDecoration.ignoredResourceForeground":"#959da5","gitDecoration.modifiedResourceForeground":"#005cc5","gitDecoration.submoduleResourceForeground":"#959da5","gitDecoration.untrackedResourceForeground":"#28a745","input.background":"#fafbfc","input.border":"#e1e4e8","input.foreground":"#2f363d","input.placeholderForeground":"#959da5","list.activeSelectionBackground":"#e2e5e9","list.activeSelectionForeground":"#2f363d","list.focusBackground":"#cce5ff","list.hoverBackground":"#ebf0f4","list.hoverForeground":"#2f363d","list.inactiveFocusBackground":"#dbedff","list.inactiveSelectionBackground":"#e8eaed","list.inactiveSelectionForeground":"#2f363d","notificationCenterHeader.background":"#e1e4e8","notificationCenterHeader.foreground":"#6a737d","notifications.background":"#fafbfc","notifications.border":"#e1e4e8","notifications.foreground":"#2f363d","notificationsErrorIcon.foreground":"#d73a49","notificationsInfoIcon.foreground":"#005cc5","notificationsWarningIcon.foreground":"#e36209","panel.background":"#f6f8fa","panel.border":"#e1e4e8","panelInput.border":"#e1e4e8","panelTitle.activeBorder":"#f9826c","panelTitle.activeForeground":"#2f363d","panelTitle.inactiveForeground":"#6a737d","pickerGroup.border":"#e1e4e8","pickerGroup.foreground":"#2f363d","progressBar.background":"#2188ff","quickInput.background":"#fafbfc","quickInput.foreground":"#2f363d","scrollbar.shadow":"#6a737d33","scrollbarSlider.activeBackground":"#959da588","scrollbarSlider.background":"#959da533","scrollbarSlider.hoverBackground":"#959da544","settings.headerForeground":"#2f363d","settings.modifiedItemIndicator":"#2188ff","sideBar.background":"#f6f8fa","sideBar.border":"#e1e4e8","sideBar.foreground":"#586069","sideBarSectionHeader.background":"#f6f8fa","sideBarSectionHeader.border":"#e1e4e8","sideBarSectionHeader.foreground":"#2f363d","sideBarTitle.foreground":"#2f363d","statusBar.background":"#fff","statusBar.border":"#e1e4e8","statusBar.debuggingBackground":"#f9826c","statusBar.debuggingForeground":"#fff","statusBar.foreground":"#586069","statusBar.noFolderBackground":"#fff","statusBarItem.prominentBackground":"#e8eaed","statusBarItem.remoteBackground":"#fff","statusBarItem.remoteForeground":"#586069","tab.activeBackground":"#fff","tab.activeBorder":"#fff","tab.activeBorderTop":"#f9826c","tab.activeForeground":"#2f363d","tab.border":"#e1e4e8","tab.hoverBackground":"#fff","tab.inactiveBackground":"#f6f8fa","tab.inactiveForeground":"#6a737d","tab.unfocusedActiveBorder":"#fff","tab.unfocusedActiveBorderTop":"#e1e4e8","tab.unfocusedHoverBackground":"#fff","terminal.ansiBlack":"#24292e","terminal.ansiBlue":"#0366d6","terminal.ansiBrightBlack":"#959da5","terminal.ansiBrightBlue":"#005cc5","terminal.ansiBrightCyan":"#3192aa","terminal.ansiBrightGreen":"#22863a","terminal.ansiBrightMagenta":"#5a32a3","terminal.ansiBrightRed":"#cb2431","terminal.ansiBrightWhite":"#d1d5da","terminal.ansiBrightYellow":"#b08800","terminal.ansiCyan":"#1b7c83","terminal.ansiGreen":"#28a745","terminal.ansiMagenta":"#5a32a3","terminal.ansiRed":"#d73a49","terminal.ansiWhite":"#6a737d","terminal.ansiYellow":"#dbab09","terminal.foreground":"#586069","terminal.tab.activeBorder":"#f9826c","terminalCursor.background":"#d1d5da","terminalCursor.foreground":"#005cc5","textBlockQuote.background":"#fafbfc","textBlockQuote.border":"#e1e4e8","textCodeBlock.background":"#f6f8fa","textLink.activeForeground":"#005cc5","textLink.foreground":"#0366d6","textPreformat.foreground":"#586069","textSeparator.foreground":"#d1d5da","titleBar.activeBackground":"#fff","titleBar.activeForeground":"#2f363d","titleBar.border":"#e1e4e8","titleBar.inactiveBackground":"#f6f8fa","titleBar.inactiveForeground":"#6a737d","tree.indentGuidesStroke":"#e1e4e8","welcomePage.buttonBackground":"#f6f8fa","welcomePage.buttonHoverBackground":"#e1e4e8"},"displayName":"GitHub Light","name":"github-light","semanticHighlighting":true,"tokenColors":[{"scope":["comment","punctuation.definition.comment","string.comment"],"settings":{"foreground":"#6a737d"}},{"scope":["constant","entity.name.constant","variable.other.constant","variable.other.enummember","variable.language"],"settings":{"foreground":"#005cc5"}},{"scope":["entity","entity.name"],"settings":{"foreground":"#6f42c1"}},{"scope":"variable.parameter.function","settings":{"foreground":"#24292e"}},{"scope":"entity.name.tag","settings":{"foreground":"#22863a"}},{"scope":"keyword","settings":{"foreground":"#d73a49"}},{"scope":["storage","storage.type"],"settings":{"foreground":"#d73a49"}},{"scope":["storage.modifier.package","storage.modifier.import","storage.type.java"],"settings":{"foreground":"#24292e"}},{"scope":["string","punctuation.definition.string","string punctuation.section.embedded source"],"settings":{"foreground":"#032f62"}},{"scope":"support","settings":{"foreground":"#005cc5"}},{"scope":"meta.property-name","settings":{"foreground":"#005cc5"}},{"scope":"variable","settings":{"foreground":"#e36209"}},{"scope":"variable.other","settings":{"foreground":"#24292e"}},{"scope":"invalid.broken","settings":{"fontStyle":"italic","foreground":"#b31d28"}},{"scope":"invalid.deprecated","settings":{"fontStyle":"italic","foreground":"#b31d28"}},{"scope":"invalid.illegal","settings":{"fontStyle":"italic","foreground":"#b31d28"}},{"scope":"invalid.unimplemented","settings":{"fontStyle":"italic","foreground":"#b31d28"}},{"scope":"carriage-return","settings":{"background":"#d73a49","content":"^M","fontStyle":"italic underline","foreground":"#fafbfc"}},{"scope":"message.error","settings":{"foreground":"#b31d28"}},{"scope":"string variable","settings":{"foreground":"#005cc5"}},{"scope":["source.regexp","string.regexp"],"settings":{"foreground":"#032f62"}},{"scope":["string.regexp.character-class","string.regexp constant.character.escape","string.regexp source.ruby.embedded","string.regexp string.regexp.arbitrary-repitition"],"settings":{"foreground":"#032f62"}},{"scope":"string.regexp constant.character.escape","settings":{"fontStyle":"bold","foreground":"#22863a"}},{"scope":"support.constant","settings":{"foreground":"#005cc5"}},{"scope":"support.variable","settings":{"foreground":"#005cc5"}},{"scope":"meta.module-reference","settings":{"foreground":"#005cc5"}},{"scope":"punctuation.definition.list.begin.markdown","settings":{"foreground":"#e36209"}},{"scope":["markup.heading","markup.heading entity.name"],"settings":{"fontStyle":"bold","foreground":"#005cc5"}},{"scope":"markup.quote","settings":{"foreground":"#22863a"}},{"scope":"markup.italic","settings":{"fontStyle":"italic","foreground":"#24292e"}},{"scope":"markup.bold","settings":{"fontStyle":"bold","foreground":"#24292e"}},{"scope":["markup.underline"],"settings":{"fontStyle":"underline"}},{"scope":["markup.strikethrough"],"settings":{"fontStyle":"strikethrough"}},{"scope":"markup.inline.raw","settings":{"foreground":"#005cc5"}},{"scope":["markup.deleted","meta.diff.header.from-file","punctuation.definition.deleted"],"settings":{"background":"#ffeef0","foreground":"#b31d28"}},{"scope":["markup.inserted","meta.diff.header.to-file","punctuation.definition.inserted"],"settings":{"background":"#f0fff4","foreground":"#22863a"}},{"scope":["markup.changed","punctuation.definition.changed"],"settings":{"background":"#ffebda","foreground":"#e36209"}},{"scope":["markup.ignored","markup.untracked"],"settings":{"background":"#005cc5","foreground":"#f6f8fa"}},{"scope":"meta.diff.range","settings":{"fontStyle":"bold","foreground":"#6f42c1"}},{"scope":"meta.diff.header","settings":{"foreground":"#005cc5"}},{"scope":"meta.separator","settings":{"fontStyle":"bold","foreground":"#005cc5"}},{"scope":"meta.output","settings":{"foreground":"#005cc5"}},{"scope":["brackethighlighter.tag","brackethighlighter.curly","brackethighlighter.round","brackethighlighter.square","brackethighlighter.angle","brackethighlighter.quote"],"settings":{"foreground":"#586069"}},{"scope":"brackethighlighter.unmatched","settings":{"foreground":"#b31d28"}},{"scope":["constant.other.reference.link","string.other.link"],"settings":{"fontStyle":"underline","foreground":"#032f62"}}],"type":"light"}'));function Kl(t){if(!t)return null;const e=t.match(/\{([\d,-]+)\}/);return e?e[1].split(",").flatMap(o=>{const s=o.split("-").map(a=>Number.parseInt(a,10));return s.length===1?[s[0]]:Array.from({length:s[1]-s[0]+1},(a,i)=>i+s[0])}):null}const mt=Symbol("highlighted-lines");function Ql(t={}){const{className:e="highlighted"}=t;return{name:"@shikijs/transformers:meta-highlight",line(n,o){var s;return this.options.meta?.__raw?((s=this.meta)[mt]||(s[mt]=Kl(this.options.meta.__raw)),(this.meta[mt]||[]).includes(o)&&this.addClassToHast(n,e),n):void 0}}}function ao(t,e,n,o=!1){return{name:t,code(s){const a=s.children.filter(l=>l.type==="element"),i=[];a.forEach((l,c)=>{let u;for(const d of l.children){if(d.type!=="element")continue;const f=d.children[0];if(f.type!=="text")continue;let h=!1;f.value=f.value.replace(e,(...g)=>n.call(this,g,l,d,a,c)?(h=!0,""):g[0]),h&&!f.value.trim()&&(u=d)}if(u&&(l.children.splice(l.children.indexOf(u),1),l.children.length===0&&(i.push(l),o))){const d=s.children[s.children.indexOf(l)+1];d&&d.type==="text"&&d.value===`
`&&i.push(d)}});for(const l of i)s.children.splice(s.children.indexOf(l),1)}}}function Xl(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function io(t={},e="@shikijs/transformers:notation-map"){const{classMap:n={},classActivePre:o=void 0}=t;return ao(e,new RegExp(`\\s*(?://|/\\*|<!--|#|--|%{1,2}|;{1,2}|"|')\\s+\\[!code (${Object.keys(n).map(Xl).join("|")})(:\\d+)?\\]\\s*(?:\\*/|-->)?\\s*$`),function([s,a,i=":1"],l,c,u,d){const f=Number.parseInt(i.slice(1),10);return u.slice(d,d+f).forEach(h=>{this.addClassToHast(h,n[a])}),o&&this.addClassToHast(this.pre,o),!0})}function Jl(t={}){const{classLineAdd:e="diff add",classLineRemove:n="diff remove",classActivePre:o="has-diff"}=t;return io({classMap:{"++":e,"--":n},classActivePre:o},"@shikijs/transformers:notation-diff")}function Yl(t={}){const{classActiveLine:e="highlighted",classActivePre:n="has-highlighted"}=t;return io({classMap:{highlight:e,hl:e},classActivePre:n},"@shikijs/transformers:notation-highlight")}function Zl(t,e,n,o){const s=lo(t);let a=s.indexOf(n);for(;a!==-1;)ec.call(this,t.children,e,a,n.length,o),a=s.indexOf(n,a+1)}function lo(t){return t.type==="text"?t.value:t.type==="element"&&t.tagName==="span"?t.children.map(lo).join(""):""}function ec(t,e,n,o,s){let a=0;for(let i=0;i<t.length;i++){const l=t[i];if(l.type!=="element"||l.tagName!=="span"||l===e)continue;const c=l.children[0];if(c.type==="text"){if(tc([a,a+c.value.length-1],[n,n+o])){const u=Math.max(0,n-a),d=o-Math.max(0,a-n);if(d===0)continue;const f=nc(l,c,u,d);this.addClassToHast(f[1],s);const h=f.filter(Boolean);t.splice(i,1,...h),i+=h.length-1}a+=c.value.length}}}function tc(t,e){return t[0]<=e[1]&&t[1]>=e[0]}function nc(t,e,n,o){const s=e.value,a=i=>rc(t,{children:[{type:"text",value:i}]});return[n>0?a(s.slice(0,n)):void 0,a(s.slice(n,n+o)),n+o<s.length?a(s.slice(n+o)):void 0]}function rc(t,e){return{...t,properties:{...t.properties},...e}}function oc(t={}){const{classActiveWord:e="highlighted-word",classActivePre:n=void 0}=t;return ao("@shikijs/transformers:notation-highlight-word",/^\s*(?:\/\/|\/\*|<!--|#)\s+\[!code word:((?:\\.|[^:\]])+)(:\d+)?\]\s*(?:\*\/|-->)?/,function([o,s,a],i,l,c,u){const d=a?Number.parseInt(a.slice(1),10):c.length;return s=s.replace(/\\(.)/g,"$1"),c.slice(u+1,u+1+d).forEach(f=>Zl.call(this,f,l,s,e)),n&&this.addClassToHast(this.pre,n),!0},!0)}function sc(t,{lang:e,attrs:n,code:o}){const s={lang:e,meta:{__raw:n},themes:{light:"github-light",dark:"github-dark"}};return t.codeToHtml(o,{...s,transformers:[...s.transformers||[],Jl(),Yl(),oc(),Ql()]})}const ac=({children:t,className:e,duration:n=.6,spring:o=!1})=>{const s=N.useRef(null),[a,i]=N.useState("auto");return N.useEffect(()=>{if(s.current){const l=new ResizeObserver(c=>{const u=c[0].contentRect.height;i(u)});return l.observe(s.current),()=>{l.disconnect()}}},[]),P.jsx(yt.div,{className:qn("overflow-hidden",e),style:{height:a},initial:!1,animate:{height:a},transition:o?bo:{duration:n},children:P.jsx("div",{ref:s,children:t})})},Hn=0,ic=({ref:t,size:e="base",element:n,selector:o}={})=>{const s=N.useRef(null),[a,i]=N.useState(!1),[l,c]=N.useState(!1),[u,d]=N.useState(!1),f=po(C=>C.h),h=N.useCallback(()=>{let C=s.current||t?.current||n;if(C)return o&&(C=C.querySelector(o)),C},[t,o,n]),g=yo(()=>{const C=h();if(!C)return;if(C.scrollHeight<=C.clientHeight+2){d(!1),i(!1),c(!1);return}d(!0);const y=C.scrollTop+C.clientHeight>=C.scrollHeight-Hn,v=C.scrollTop<=Hn;i(y),c(v)});N.useEffect(()=>{const C=h();if(C)return C.addEventListener("scroll",g),()=>{C.removeEventListener("scroll",g)}},[g,h,n]),N.useEffect(()=>{g()},[g,f,n]);const p={base:"",lg:"-lg"}[e];return[s,u?bt("scroller",a&&"mask-t",l&&"mask-b",!a&&!l&&"mask-both")+p:""]},Un={"code-card":"_code-card_c9wzj_1","scroll-container":"_scroll-container_c9wzj_80"},lc=t=>{const e=t.match(/filename="([^"]+)"/);return e?e[1]:null},cc=t=>t.includes("collapsed")||!t.includes("expand"),Wn={initial:{opacity:1,scale:1},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0}},co=N.forwardRef((t,e)=>{const{shouldCollapsed:n=!0,lang:o,content:s,attrs:a}=t,[i,l]=N.useState(!1),c=N.useRef(),u=N.useCallback(()=>{navigator.clipboard.writeText(s),l(!0),clearTimeout(c.current),c.current=setTimeout(()=>{l(!1)},2e3)},[s]),[d,f]=N.useState(null);N.useImperativeHandle(e,()=>d);const[h,g]=N.useState(n),[p,C]=N.useState(!1);N.useEffect(()=>{if(!n)return;const w=d;if(!w)return;const B=mo().h/2;if(w.scrollHeight>=B){C(!0);const W=w.querySelector(".highlighted");if(W){const Ie=Number.parseInt(getComputedStyle(W).height||"0",10),rt=w.querySelector("pre > code"),ot=Array.from(rt.children).indexOf(W);w.scrollTop=Ie*ot-w.clientHeight/2}}else C(!1)},[s,d]);const y=N.useMemo(()=>lc(a||""),[a]),[,v]=ic({element:d,size:"lg"}),k=!!y;return P.jsxs("div",{className:bt(Un["code-card"],"shiki-block group"),onCopy:en,children:[!!y&&P.jsxs("div",{className:"z-10 flex w-full items-center justify-between rounded-t-xl bg-accent/20 px-5 py-2 text-sm",children:[P.jsx("span",{className:"shrink-0 grow truncate",children:y}),P.jsx("span",{className:"pointer-events-none shrink-0 grow-0","aria-hidden":!0,children:o?.toUpperCase()})]}),!y&&!!o&&P.jsx("div",{"aria-hidden":!0,className:"pointer-events-none absolute bottom-3 right-3 z-[2] text-sm opacity-60",children:o.toUpperCase()}),P.jsxs("div",{className:"bg-accent/5 py-4",children:[P.jsx(go,{onClick:u,className:bt("center absolute right-2 top-2 z-[3] flex text-xs","rounded-md border border-accent/5 bg-accent/80 p-1.5 text-white backdrop-blur duration-200","opacity-0 group-hover:opacity-100",y&&"!top-12"),children:P.jsx(Co,{mode:"wait",children:i?P.jsx(yt.i,{className:"i-mingcute-check-line size-4",...Wn},"copied"):P.jsx(yt.i,{className:"i-mingcute-copy-2-fill size-4",...Wn},"copy")})}),P.jsxs(ac,{spring:!0,className:"relative",children:[P.jsx("div",{onCopy:en,ref:f,className:qn("relative max-h-[50vh] w-full overflow-auto",h?p?v:"":"!max-h-full",Un["scroll-container"]),style:{"--sr-margin":k?"1rem":`${(o?.length||0)*14+4}px`},dangerouslySetInnerHTML:N.useMemo(()=>t.renderedHTML?{__html:t.renderedHTML}:void 0,[t.renderedHTML]),children:t.children}),p&&h&&P.jsx("div",{className:`absolute inset-x-0 bottom-0 flex justify-center py-2 duration-200 ${v.includes("mask-both")||v.includes("mask-b")?"":"pointer-events-none opacity-0"}`,children:P.jsxs("button",{onClick:()=>g(!1),"aria-hidden":!0,className:"flex items-center justify-center text-xs",children:[P.jsx("i",{className:"i-mingcute-arrow-to-down-line"}),P.jsx("span",{className:"ml-2",children:"展开"})]})})]})]})]})});co.displayName="ShikiHighLighterWrapper";const zn=(()=>{if(ho)return;const t=rl(),e=zl({themes:[ql,Vl],langs:[],engine:t});return{codeHighlighter:e,fn:n=>sc(e,n)}})(),vc=t=>{const{lang:e,content:n,attrs:o}=t;N.use(N.useMemo(async()=>{async function l(d,f){const h=zn?.codeHighlighter;h&&(h.getLoadedLanguages().includes(d)||await h.loadLanguage(await f()))}const{bundledLanguages:c}=await uo(async()=>{const{bundledLanguages:d}=await import("./langs-DCiNkHP7.js");return{bundledLanguages:d}},__vite__mapDeps([0,1,2]),import.meta.url);if(!e)return;const u=c[e];if(u)return l(e||"",u)},[e]));const s=N.useMemo(()=>zn?.fn?.({attrs:o||"",code:n,lang:e?e.toLowerCase():""}),[o,e,n]),[a,i]=N.useState(null);return fo(()=>{if(!s||!a)return;const l=a.querySelectorAll(".line"),c=Math.max(...Array.from(l).map(u=>u.scrollWidth));l.forEach(u=>{u.style.width=`${c}px`})},[a,s]),P.jsx(co,{shouldCollapsed:cc(o||""),...t,renderedHTML:s,ref:i})};export{ac as A,co as S,vc as a,gn as c,cc as p,bs as z};
